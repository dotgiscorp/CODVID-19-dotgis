{"version":3,"sources":["../node_modules/@carto/airship-components/dist/esm-es5/as-legend-size-continuous-line_2.entry.js","../node_modules/@carto/airship-components/dist/esm-es5/border-style-counts-8a3a8717.js"],"names":["LegendSizeContinuousLine","class_1","hostRef","registerInstance","this","data","orientation","size","leadingLineStrokeWidth","textLineHeight","xMarginFactor","yMarginFactor","width","rSize","prototype","componentWillUpdate","parseSize","componentWillLoad","render","_a","_this","length","sortedData","getSortedData","MAX","HALF","X_POS","Math","max","X_OFFSET","realPath","lines","forEach","d","i","FACTOR","Y_RATIO","TOP_X","BOTTOM_X","BOTTOM_Y","TOP_Y","TOP","BOTTOM","splice","join","label","Y_OFFSET","getOffset","X","Y","first","second","reverse","push","x1","x2","y1","y2","classes","h","class","style","getSVGStyle","viewBox","getSVGViewBox","getPathStyle","map","xOff","offset","x","y","slice","sort","fill","color","height","marginX","marginY","index","Object","defineProperty","get","enumerable","configurable","LegendSizeContinuousPoint","class_2","scale","maxSize","renderStep","strokeStyle","FAKE_BORDER_SIZE","strokeColor","sizeOffset","borderStyleCounts","round","backgroundColor","border","borderStyle","indexOf"],"mappings":"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","file":"static/js/12.73500821.chunk.js","sourcesContent":["import { r as registerInstance, h } from './core-a69618da.js';\nimport { b as borderStyleCounts } from './border-style-counts-8a3a8717.js';\nvar TEXT_MARGIN = 4;\nvar MIN_LINE_SIZE = 4;\nvar LegendSizeContinuousLine = /** @class */ (function () {\n    function class_1(hostRef) {\n        registerInstance(this, hostRef);\n        this.data = null;\n        this.orientation = 'vertical';\n        this.size = 300;\n        this.leadingLineStrokeWidth = 0.5;\n        // Line height of the font, which is 12 with the original as-caption\n        this.textLineHeight = 12;\n        this.xMarginFactor = 0.1;\n        this.yMarginFactor = 0.1;\n        this.width = null;\n        this.rSize = 0;\n    }\n    class_1.prototype.componentWillUpdate = function () {\n        this.parseSize();\n    };\n    class_1.prototype.componentWillLoad = function () {\n        this.parseSize();\n    };\n    class_1.prototype.render = function () {\n        var _a;\n        var _this = this;\n        if (!this.data || this.data.length === 0) {\n            return;\n        }\n        var sortedData = this.getSortedData();\n        var MAX = sortedData[0].width;\n        var HALF = MAX / 2;\n        var X_POS = Math.max(MAX + MIN_LINE_SIZE, this.width);\n        var X_OFFSET = this.orientation === 'horizontal' || this.width === null\n            ? 0\n            : (this.width - MAX) / 2;\n        // Path is painted counterclockwise starting from bottom left point\n        var realPath = [];\n        var lines = [];\n        sortedData.forEach(function (d, i) {\n            var FACTOR = HALF * (d.width / MAX);\n            var Y_RATIO = i / (sortedData.length - 1);\n            var TOP_X = HALF + FACTOR;\n            var BOTTOM_X = HALF - FACTOR;\n            var BOTTOM_Y = _this.size - (_this.size * Y_RATIO);\n            var TOP_Y = BOTTOM_Y;\n            var TOP = _this.orientation === 'vertical'\n                ? [TOP_X + X_OFFSET, TOP_Y]\n                : [TOP_Y + X_OFFSET, TOP_X];\n            var BOTTOM = _this.orientation === 'vertical'\n                ? [BOTTOM_X + X_OFFSET, BOTTOM_Y]\n                : [TOP_Y + X_OFFSET, BOTTOM_X];\n            // Insert always at current index\n            realPath.splice(i, 0, \"L\" + TOP.join(' '));\n            // Insert just before the last element\n            realPath.splice(realPath.length - i, 0, \"L\" + BOTTOM.join(' '));\n            if (d.label) {\n                var Y_OFFSET = _this.getOffset(i, sortedData.length - 1);\n                var X = HALF + FACTOR;\n                var Y = _this.size - (_this.size * Y_RATIO) + Y_OFFSET;\n                var first = [X, Y];\n                var second = [X_POS, Y];\n                if (_this.orientation === 'horizontal') {\n                    first.reverse();\n                    second.reverse();\n                }\n                first[0] += X_OFFSET;\n                second[0] += X_OFFSET;\n                lines.push({\n                    label: d.label,\n                    x1: first[0],\n                    x2: second[0],\n                    y1: first[1],\n                    y2: second[1]\n                });\n            }\n        });\n        if (this.orientation === 'horizontal') {\n            realPath.splice(0, 0, \"M\" + this.size + \" 0\");\n        }\n        else {\n            realPath.splice(0, 0, \"M0 \" + this.size);\n        }\n        var classes = (_a = {},\n            _a[\"as-legend-size-continuous-line--\" + this.orientation] = true,\n            _a);\n        return h(\"svg\", { class: classes, style: this.getSVGStyle(), viewBox: this.getSVGViewBox() }, h(\"g\", null, h(\"path\", { style: this.getPathStyle(), d: realPath.join(' ') + ' Z' }), h(\"g\", null, lines.map(function (_a) {\n            var x1 = _a.x1, x2 = _a.x2, y1 = _a.y1, y2 = _a.y2;\n            var xOff = -X_OFFSET;\n            if (_this.orientation === 'horizontal') {\n                xOff = 0;\n            }\n            return (h(\"line\", { \"stroke-width\": _this.leadingLineStrokeWidth, x1: x1, y1: y1, x2: x2 + xOff, y2: y2 }));\n        })), h(\"g\", null, lines.map(function (_a) {\n            var label = _a.label, x2 = _a.x2, y2 = _a.y2;\n            var offset = {\n                x: TEXT_MARGIN - X_OFFSET,\n                y: _this.textLineHeight / 4\n            };\n            if (_this.orientation === 'horizontal') {\n                offset.x = 0;\n                offset.y = _this.textLineHeight;\n            }\n            return [\n                h(\"text\", { x: x2 + offset.x, y: y2 + offset.y }, label)\n            ];\n        }))));\n    };\n    class_1.prototype.parseSize = function () {\n        if (!this.data || this.data.length === 0) {\n            return;\n        }\n        var sortedData = this.getSortedData();\n        var max = sortedData[0].width;\n        this.rSize = Math.max(max + MIN_LINE_SIZE + (this.textLineHeight), 0);\n    };\n    class_1.prototype.getSortedData = function () {\n        if (this.data === null) {\n            return this.data;\n        }\n        return this.data.slice().sort(function (first, second) { return second.width - first.width; });\n    };\n    class_1.prototype.getPathStyle = function () {\n        return {\n            fill: \"\" + this.data[0].color\n        };\n    };\n    class_1.prototype.getSVGStyle = function () {\n        var height = (this.orientation === 'horizontal' ? this.rSize : this.size);\n        return {\n            height: height * (1 + this.yMarginFactor) + \"px\",\n            width: this.size * (1 + this.xMarginFactor) + \"px\"\n        };\n    };\n    class_1.prototype.getSVGViewBox = function () {\n        var height = (this.orientation === 'horizontal' ? this.rSize : this.size);\n        var marginX = this.size * (-this.xMarginFactor / 2);\n        var marginY = height * (-this.yMarginFactor / 2);\n        if (this.orientation === 'vertical') {\n            marginX = 0;\n        }\n        return marginX + \" \" + marginY + \" \" + this.size * (1 + this.xMarginFactor) + \" \" + height * (1 + this.yMarginFactor);\n    };\n    class_1.prototype.getOffset = function (index, length) {\n        var offset = 0;\n        if (index === length) {\n            offset += this.leadingLineStrokeWidth;\n        }\n        if (index === 0) {\n            offset -= this.leadingLineStrokeWidth;\n        }\n        return offset;\n    };\n    Object.defineProperty(class_1, \"style\", {\n        get: function () { return \"as-legend-size-continuous-line{display:block;overflow:hidden}as-legend-size-continuous-line svg text{font:var(--as--font--caption)}as-legend-size-continuous-line svg line{stroke:var(--as-legend--color)}as-legend-size-continuous-line svg.as-legend-size-continuous-line--horizontal text{text-anchor:middle}\"; },\n        enumerable: true,\n        configurable: true\n    });\n    return class_1;\n}());\n// This component ignores the strokeWidth property, and always paints\n// a 1px border.\nvar FAKE_BORDER_SIZE = 1;\nvar LegendSizeContinuousPoint = /** @class */ (function () {\n    function class_2(hostRef) {\n        registerInstance(this, hostRef);\n        this.orientation = 'vertical';\n        this.scale = 1;\n    }\n    class_2.prototype.render = function () {\n        var _a;\n        var _this = this;\n        if (!this.data) {\n            return null;\n        }\n        var classes = (_a = {\n                'as-legend-size-continuous-point--wrapper': true\n            },\n            _a[\"as-legend-size-continuous-point--\" + this.orientation] = true,\n            _a);\n        var sortedData = this.data.slice().sort(function (first, second) { return second.width - first.width; });\n        this.maxSize = sortedData[0].width * this.scale;\n        var size = {\n            height: this.maxSize + \"px\",\n            width: this.maxSize + \"px\"\n        };\n        return h(\"div\", { class: classes }, h(\"span\", { class: 'as-legend-size-continuous-point--label' }, sortedData[sortedData.length - 1].label), h(\"div\", { style: size, class: 'as-legend-size-continuous-point--steps' }, sortedData.map(function (data) { return _this.renderStep(data); })), h(\"span\", { class: 'as-legend-size-continuous-point--label' }, sortedData[0].label));\n    };\n    class_2.prototype.renderStep = function (data) {\n        var strokeStyle = FAKE_BORDER_SIZE + \"px \" + (data.strokeStyle || 'solid') + \" \" + data.strokeColor;\n        var sizeOffset = borderStyleCounts(data.strokeStyle)\n            ? FAKE_BORDER_SIZE * 2\n            : 0;\n        var size = Math.round((data.width + sizeOffset) * this.scale) + \"px\";\n        var style = {\n            backgroundColor: data.color,\n            border: strokeStyle,\n            height: size,\n            width: size,\n        };\n        return h(\"div\", { class: 'as-legend-size-continuous-point--circle', style: style });\n    };\n    Object.defineProperty(class_2, \"style\", {\n        get: function () { return \"as-legend-size-continuous-point{--as-legend-size-continuous-point--color:var(--as--color--type-01);--as-legend-size-continuous-point--shadow:rgba(0,0,0,0.1);display:block}as-legend-size-continuous-point .as-legend-size-continuous-point--steps{position:relative;margin:8px}as-legend-size-continuous-point .as-legend-size-continuous-point--steps,as-legend-size-continuous-point .as-legend-size-continuous-point--wrapper{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}as-legend-size-continuous-point .as-legend-size-continuous-point--circle{position:absolute;border:2px solid var(--as-legend-size-continuous-point--shadow);border-radius:50%;-webkit-box-shadow:0 0 2px 0 var(--as-legend-size-continuous-point--shadow);box-shadow:0 0 2px 0 var(--as-legend-size-continuous-point--shadow)}as-legend-size-continuous-point .as-legend-size-continuous-point--label{color:var(--as-legend-size-continuous-point--color);font:var(--as--font--caption);text-transform:capitalize;white-space:nowrap}as-legend-size-continuous-point .as-legend-size-continuous-point--vertical .as-legend-size-continuous-point--steps,as-legend-size-continuous-point .as-legend-size-continuous-point--vertical.as-legend-size-continuous-point--wrapper{-ms-flex-direction:column-reverse;flex-direction:column-reverse}\"; },\n        enumerable: true,\n        configurable: true\n    });\n    return class_2;\n}());\nexport { LegendSizeContinuousLine as as_legend_size_continuous_line, LegendSizeContinuousPoint as as_legend_size_continuous_point };\n","function borderStyleCounts(borderStyle) {\n    return ['none', 'initial', 'inherit', 'hidden', 'unset'].indexOf(borderStyle) === -1;\n}\nexport { borderStyleCounts as b };\n"],"sourceRoot":""}