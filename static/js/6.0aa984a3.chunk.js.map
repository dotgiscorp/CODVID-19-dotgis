{"version":3,"sources":["../node_modules/@carto/airship-components/dist/esm-es5/as-y-axis.entry.js","../node_modules/@carto/airship-components/dist/esm-es5/readable-number-b11b551f.js","../node_modules/@carto/airship-components/dist/esm-es5/index-87eae0eb.js","../node_modules/@carto/airship-components/dist/esm-es5/y-axis.service-efb05fbe.js"],"names":["YAxis","class_1","hostRef","registerInstance","this","from","to","responsive","_resizeListener","bind","prototype","componentWillLoad","addEventListener","componentDidUnload","removeEventListener","render","element","previousElementSibling","scale","yAxisService","renderYAxis","forceUpdate","Object","defineProperty","get","getElement","enumerable","configurable","readableNumber","value","roundedNumber","Math","abs","ceil","toFixed","padStart","roundedStr","length","slice","Array","identity","x","translateX","translateY","y","number","d","center","offset","max","bandwidth","round","entering","__axis","axis","orient","tickArguments","tickValues","tickFormat","tickSizeInner","tickSizeOuter","tickPadding","k","transform","context","values","ticks","apply","domain","format","spacing","range","range0","range1","position","copy","selection","path","selectAll","data","tick","order","tickExit","exit","tickEnter","enter","append","attr","line","select","text","merge","insert","transition","isFinite","getAttribute","p","parentNode","remove","filter","each","_","arguments","call","tickSize","axisBottom","axisLeft","svgElement","ELEMENT","HEIGHT","node","getBoundingClientRect","height","TICK_SIZE","width","RANGE","yScale","linear","yAxis","empty","querySelector"],"mappings":"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","file":"static/js/6.0aa984a3.chunk.js","sourcesContent":["import { r as registerInstance, g as getElement } from './core-a69618da.js';\nimport './readable-number-b11b551f.js';\nimport './index-3374c455.js';\nimport './index-87eae0eb.js';\nimport { y as yAxisService } from './y-axis.service-efb05fbe.js';\nvar YAxis = /** @class */ (function () {\n    function class_1(hostRef) {\n        registerInstance(this, hostRef);\n        /**\n         * Lower limit of the axis\n         *\n         * @type {number}\n         * @memberof YAxis\n         */\n        this.from = 0;\n        /**\n         * Upper limit of the axis\n         *\n         * @type {Number[]}\n         * @memberof YAxis\n         */\n        this.to = 0;\n        /**\n         * Use this attribute to decide if the widget should be rerendered on window resize\n         * Defaults to true\n         */\n        this.responsive = true;\n        this._resizeListener = this._resizeListener.bind(this);\n    }\n    class_1.prototype.componentWillLoad = function () {\n        addEventListener('resize', this._resizeListener);\n    };\n    class_1.prototype.componentDidUnload = function () {\n        removeEventListener('resize', this._resizeListener);\n    };\n    class_1.prototype.render = function () {\n        var element = this.element.previousElementSibling;\n        var scale = [this.from, this.to];\n        yAxisService.renderYAxis(element, scale);\n    };\n    class_1.prototype._resizeListener = function () {\n        if (this.responsive) {\n            this.element.forceUpdate();\n        }\n    };\n    Object.defineProperty(class_1.prototype, \"element\", {\n        get: function () { return getElement(this); },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(class_1, \"style\", {\n        get: function () { return \".y-axis{--widget-axis-text-color:var(--as--color--type-01,#2c2c2c);--widget-axis-line-color:var(--as--color--ui-05,#b3b3b3)}.y-axis .tick text{width:30px;fill:var(--widget-axis-text-color);white-space:pre}.y-axis .tick line{stroke:var(--widget-axis-line-color);opacity:.1}.y-axis .tick line.zero{opacity:.5}.y-axis .domain{display:none}\"; },\n        enumerable: true,\n        configurable: true\n    });\n    return class_1;\n}());\nexport { YAxis as as_y_axis };\n","/**\n *  Convert long numbers to\n *  readizable numbers.\n *\n *  Ex: 1200 -> 1.2K\n */\nfunction readableNumber(value) {\n    var roundedNumber = Math.abs(Math.ceil(value * 100) / 100);\n    if (roundedNumber >= 1000000000) {\n        return ((roundedNumber / 1000000000).toFixed(1) + \"G\").padStart(5);\n    }\n    if (roundedNumber >= 1000000) {\n        return ((roundedNumber / 1000000).toFixed(1) + \"M\").padStart(5);\n    }\n    if (roundedNumber >= 1000) {\n        return ((roundedNumber / 1000).toFixed(1) + \"K\").padStart(5);\n    }\n    var roundedStr = \"\" + roundedNumber;\n    // This seems backwards but it's an Edge issue.\n    // padStart(5) looks weird for 0 - 9, looks better with padStart(8)\n    // 10 - 99 looks better with padStart(7)\n    return roundedStr.padStart(6 + Math.abs(roundedStr.length - 3));\n}\nexport { readableNumber as r };\n","var slice = Array.prototype.slice;\nfunction identity(x) {\n    return x;\n}\nvar top = 1, right = 2, bottom = 3, left = 4, epsilon = 1e-6;\nfunction translateX(x) {\n    return \"translate(\" + (x + 0.5) + \",0)\";\n}\nfunction translateY(y) {\n    return \"translate(0,\" + (y + 0.5) + \")\";\n}\nfunction number(scale) {\n    return function (d) {\n        return +scale(d);\n    };\n}\nfunction center(scale) {\n    var offset = Math.max(0, scale.bandwidth() - 1) / 2; // Adjust for 0.5px offset.\n    if (scale.round())\n        offset = Math.round(offset);\n    return function (d) {\n        return +scale(d) + offset;\n    };\n}\nfunction entering() {\n    return !this.__axis;\n}\nfunction axis(orient, scale) {\n    var tickArguments = [], tickValues = null, tickFormat = null, tickSizeInner = 6, tickSizeOuter = 6, tickPadding = 3, k = orient === top || orient === left ? -1 : 1, x = orient === left || orient === right ? \"x\" : \"y\", transform = orient === top || orient === bottom ? translateX : translateY;\n    function axis(context) {\n        var values = tickValues == null ? (scale.ticks ? scale.ticks.apply(scale, tickArguments) : scale.domain()) : tickValues, format = tickFormat == null ? (scale.tickFormat ? scale.tickFormat.apply(scale, tickArguments) : identity) : tickFormat, spacing = Math.max(tickSizeInner, 0) + tickPadding, range = scale.range(), range0 = +range[0] + 0.5, range1 = +range[range.length - 1] + 0.5, position = (scale.bandwidth ? center : number)(scale.copy()), selection = context.selection ? context.selection() : context, path = selection.selectAll(\".domain\").data([null]), tick = selection.selectAll(\".tick\").data(values, scale).order(), tickExit = tick.exit(), tickEnter = tick.enter().append(\"g\").attr(\"class\", \"tick\"), line = tick.select(\"line\"), text = tick.select(\"text\");\n        path = path.merge(path.enter().insert(\"path\", \".tick\")\n            .attr(\"class\", \"domain\")\n            .attr(\"stroke\", \"#000\"));\n        tick = tick.merge(tickEnter);\n        line = line.merge(tickEnter.append(\"line\")\n            .attr(\"stroke\", \"#000\")\n            .attr(x + \"2\", k * tickSizeInner));\n        text = text.merge(tickEnter.append(\"text\")\n            .attr(\"fill\", \"#000\")\n            .attr(x, k * spacing)\n            .attr(\"dy\", orient === top ? \"0em\" : orient === bottom ? \"0.71em\" : \"0.32em\"));\n        if (context !== selection) {\n            path = path.transition(context);\n            tick = tick.transition(context);\n            line = line.transition(context);\n            text = text.transition(context);\n            tickExit = tickExit.transition(context)\n                .attr(\"opacity\", epsilon)\n                .attr(\"transform\", function (d) { return isFinite(d = position(d)) ? transform(d) : this.getAttribute(\"transform\"); });\n            tickEnter\n                .attr(\"opacity\", epsilon)\n                .attr(\"transform\", function (d) { var p = this.parentNode.__axis; return transform(p && isFinite(p = p(d)) ? p : position(d)); });\n        }\n        tickExit.remove();\n        path\n            .attr(\"d\", orient === left || orient == right\n            ? \"M\" + k * tickSizeOuter + \",\" + range0 + \"H0.5V\" + range1 + \"H\" + k * tickSizeOuter\n            : \"M\" + range0 + \",\" + k * tickSizeOuter + \"V0.5H\" + range1 + \"V\" + k * tickSizeOuter);\n        tick\n            .attr(\"opacity\", 1)\n            .attr(\"transform\", function (d) { return transform(position(d)); });\n        line\n            .attr(x + \"2\", k * tickSizeInner);\n        text\n            .attr(x, k * spacing)\n            .text(format);\n        selection.filter(entering)\n            .attr(\"fill\", \"none\")\n            .attr(\"font-size\", 10)\n            .attr(\"font-family\", \"sans-serif\")\n            .attr(\"text-anchor\", orient === right ? \"start\" : orient === left ? \"end\" : \"middle\");\n        selection\n            .each(function () { this.__axis = position; });\n    }\n    axis.scale = function (_) {\n        return arguments.length ? (scale = _, axis) : scale;\n    };\n    axis.ticks = function () {\n        return tickArguments = slice.call(arguments), axis;\n    };\n    axis.tickArguments = function (_) {\n        return arguments.length ? (tickArguments = _ == null ? [] : slice.call(_), axis) : tickArguments.slice();\n    };\n    axis.tickValues = function (_) {\n        return arguments.length ? (tickValues = _ == null ? null : slice.call(_), axis) : tickValues && tickValues.slice();\n    };\n    axis.tickFormat = function (_) {\n        return arguments.length ? (tickFormat = _, axis) : tickFormat;\n    };\n    axis.tickSize = function (_) {\n        return arguments.length ? (tickSizeInner = tickSizeOuter = +_, axis) : tickSizeInner;\n    };\n    axis.tickSizeInner = function (_) {\n        return arguments.length ? (tickSizeInner = +_, axis) : tickSizeInner;\n    };\n    axis.tickSizeOuter = function (_) {\n        return arguments.length ? (tickSizeOuter = +_, axis) : tickSizeOuter;\n    };\n    axis.tickPadding = function (_) {\n        return arguments.length ? (tickPadding = +_, axis) : tickPadding;\n    };\n    return axis;\n}\nfunction axisBottom(scale) {\n    return axis(bottom, scale);\n}\nfunction axisLeft(scale) {\n    return axis(left, scale);\n}\nexport { axisLeft as a, axisBottom as b };\n","import { r as readableNumber } from './readable-number-b11b551f.js';\nimport { s as select, l as linear } from './index-3374c455.js';\nimport { a as axisLeft } from './index-87eae0eb.js';\nfunction renderYAxis(svgElement, scale) {\n    var VERTICAL_SPACING = 36; // Need 16px top and bottom to view the labels\n    var TICK_RIGHT_MARGIN = 18;\n    var LABEL_WIDTH = 25;\n    var ELEMENT = select(svgElement);\n    var HEIGHT = ELEMENT.node().getBoundingClientRect().height - VERTICAL_SPACING;\n    var WIDTH = ELEMENT.node().getBoundingClientRect().width;\n    var TICK_SIZE = -WIDTH + LABEL_WIDTH;\n    var RANGE = [HEIGHT, 0];\n    var yScale = linear()\n        .domain(scale)\n        .range(RANGE);\n    var yAxis = axisLeft(yScale)\n        .tickSizeInner(TICK_SIZE + TICK_RIGHT_MARGIN)\n        .ticks(6)\n        .tickFormat(function (d) { return \"\" + readableNumber(d); });\n    if (ELEMENT.select('.y-axis').empty()) {\n        _createYAxisElement(ELEMENT).call(yAxis);\n    }\n    else {\n        ELEMENT.select('.y-axis').call(yAxis);\n    }\n    ELEMENT.selectAll('.tick text')\n        .attr('textLength', LABEL_WIDTH)\n        .attr('lengthAdjust', 'spacing');\n    return svgElement.querySelector('g.y-axis');\n}\nfunction _createYAxisElement(element) {\n    return element.append('g').attr('class', 'y-axis');\n}\nvar yAxisService = { renderYAxis: renderYAxis };\nexport { yAxisService as y };\n"],"sourceRoot":""}