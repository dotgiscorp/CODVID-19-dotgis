{"version":3,"sources":["../node_modules/@carto/airship-components/dist/esm-es5/readable-number-b11b551f.js","../node_modules/@carto/airship-components/dist/esm-es5/content.fragment-e220039c.js","../node_modules/@carto/airship-components/dist/esm-es5/styles-b283ec9e.js","../node_modules/@carto/airship-components/dist/esm-es5/as-category-widget.entry.js"],"names":["readableNumber","value","roundedNumber","Math","abs","ceil","toFixed","padStart","roundedStr","length","contentFragment","isLoading","error","isEmpty","heading","errorDescription","noDataMessage","fragment","h","class","shadeOrBlend","p","from","to","pSBCr","d","l","RGB","split","i","parseFloat","slice","r","parseInt","round","b","f","t","toString","undefined","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","__generator","body","y","g","_","label","sent","trys","ops","verb","Symbol","iterator","this","n","v","op","TypeError","call","pop","push","CategoryWidget","class_1","hostRef","registerInstance","categories","disableInteractivity","valueFormatter","defaultFormatter","showClearButton","showHeader","useTotalPercentage","visibleCategories","Infinity","noDataHeaderMessage","noDataBodyMessage","selectedCategories","_firstDataSupplied","categoriesSelected","createEvent","prototype","onDataChange","Boolean","componentWillLoad","getSelectedCategories","_a","clearSelection","_onCategoriesChanged","render","_isLoading","_renderHeader","_renderSelection","_renderContent","_this","_isEmpty","selectedCount","selection","clearText","showClear","onClear","header","subheader","description","_renderCategoryList","cssClasses","_renderCategories","otherCategoryTemplate","moreCategoriesThanVisible","_parseCategories","otherCategory","categoriesToRender","maximumValue","_getCategoriesTotalValue","_getCategoriesMaximumValue","_renderOtherCategory","map","category","_renderCategory","options","isOther","isSelected","_isSelected","name","isAnyCategorySelected","barColor","_getBarColor","color","progressStyles","backgroundColor","width","displayValue","onClick","_toggleCategory","style","categoryData","categoryName","includes","filter","currentCategory","concat","emit","otherCategoryPresent","_getVisibleCategories","reduce","maximum","sum","find","parsedCategories","Object","defineProperty","get","enumerable","configurable"],"mappings":"oHAMA,SAASA,EAAeC,GACpB,IAAIC,EAAgBC,KAAKC,IAAID,KAAKE,KAAa,IAARJ,GAAe,KACtD,GAAIC,GAAiB,IACjB,QAASA,EAAgB,KAAYI,QAAQ,GAAK,KAAKC,SAAS,GAEpE,GAAIL,GAAiB,IACjB,QAASA,EAAgB,KAASI,QAAQ,GAAK,KAAKC,SAAS,GAEjE,GAAIL,GAAiB,IACjB,QAASA,EAAgB,KAAMI,QAAQ,GAAK,KAAKC,SAAS,GAE9D,IAAIC,EAAa,GAAKN,EAItB,OAAOM,EAAWD,SAAS,EAAIJ,KAAKC,IAAII,EAAWC,OAAS,IArBhE,mC,iCCAA,8CAYA,SAASC,EAAgBC,EAAWC,EAAOC,EAASC,EAASC,EAAkBC,EAAeC,GAC1F,OAAIN,EACOO,YAAE,YAAa,CAAEC,MAAOL,EAAU,oBAAsB,sBAE/DF,EACOM,YAAE,IAAK,CAAEC,MAAO,mBAAqBJ,GAAoB,oBAEhEF,EACOK,YAAE,IAAK,CAAEC,MAAO,mBAAqBH,GAEzCC,I,iCClBX,SAASG,EAAaC,EAAGC,EAAMC,GAC3B,GAAkB,iBAANF,GAAkBA,GAAK,GAAKA,EAAI,GAAsB,iBAATC,GAAiC,KAAXA,EAAK,IAAwB,KAAXA,EAAK,IAAeC,GAAqB,iBAAPA,EAC/H,OAAO,KACX,IAAIC,EAAQ,SAAUC,GAClB,IAAIC,EAAID,EAAEhB,OAAQkB,EAAM,GACxB,GAAID,EAAI,EAAG,CAEP,IADAD,EAAIA,EAAEG,MAAM,MACNnB,OAAS,GAAKgB,EAAEhB,OAAS,EAC3B,OAAO,KACXkB,EAAI,GAAKE,EAAEJ,EAAE,GAAGG,MAAM,KAAK,IAAKD,EAAI,GAAKE,EAAEJ,EAAE,IAAKE,EAAI,GAAKE,EAAEJ,EAAE,IAAKE,EAAI,GAAKF,EAAE,GAAKK,WAAWL,EAAE,KAAO,MAEvG,CACD,GAAS,GAALC,GAAe,GAALA,GAAUA,EAAI,EACxB,OAAO,KACPA,EAAI,IACJD,EAAI,IAAMA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAAMC,EAAI,EAAID,EAAE,GAAK,GAAKA,EAAE,GAAK,KACpFA,EAAII,EAAEJ,EAAEM,MAAM,GAAI,IAAKJ,EAAI,GAAKF,GAAK,GAAK,IAAKE,EAAI,GAAKF,GAAK,EAAI,IAAKE,EAAI,GAAS,IAAJF,EAASE,EAAI,IAAM,EACzF,GAALD,GAAe,GAALA,IACVC,EAAI,GAAKK,EAAGL,EAAI,GAAK,IAAO,KAAS,IAAOA,EAAI,GAAKA,EAAI,GAAIA,EAAI,GAAKA,EAAI,GAAIA,EAAI,GAAKF,GAAK,GAAK,KAEzG,OAAOE,GAEPE,EAAII,SAAUD,EAAI7B,KAAK+B,MAAOhB,EAAII,EAAKb,OAAS,EAAoF0B,GAAjFjB,EAAmB,iBAAPK,EAAkBA,EAAGd,OAAS,GAAiB,KAANc,IAAaL,EAAYA,EAAOG,EAAI,GAA8Ee,GAA3Ef,EAAIc,GAAS,EAALd,EAASA,EAAGE,EAAKA,GAAY,KAANA,EAAYA,EAAKY,EAAI,UAAY,UAAeX,EAAMF,IAAOe,EAAIb,EAAMD,GACzP,OAAKa,GAAMC,EAEPnB,EACO,OAASkB,EAAE,IAAM,GAAKC,EAAE,IAAM,EAAI,KAAO,KAAOL,GAAGK,EAAE,GAAKD,EAAE,IAAMf,EAAIe,EAAE,IAAM,IAAMJ,GAAGK,EAAE,GAAKD,EAAE,IAAMf,EAAIe,EAAE,IAAM,IAAMJ,GAAGK,EAAE,GAAKD,EAAE,IAAMf,EAAIe,EAAE,KAAOA,EAAE,GAAK,GAAKC,EAAE,GAAK,EAAI,IAAM,KAAOD,EAAE,IAAM,GAAKC,EAAE,IAAM,EAAIL,EAA+B,MAA3BK,EAAE,GAAKD,EAAE,IAAMf,EAAIe,EAAE,KAAe,IAAQC,EAAE,GAAK,EAAID,EAAE,GAAKC,EAAE,IAAM,KAE9R,KAAO,WAA4C,SAA9BL,GAAGK,EAAE,GAAKD,EAAE,IAAMf,EAAIe,EAAE,IAAgD,MAA9BJ,GAAGK,EAAE,GAAKD,EAAE,IAAMf,EAAIe,EAAE,IAA8C,IAA9BJ,GAAGK,EAAE,GAAKD,EAAE,IAAMf,EAAIe,EAAE,KAAeA,EAAE,IAAM,GAAKC,EAAE,IAAM,EAAIL,EAA+B,MAA3BK,EAAE,GAAKD,EAAE,IAAMf,EAAIe,EAAE,KAAaC,EAAE,IAAM,EAAIL,EAAS,IAAPK,EAAE,IAAYD,EAAE,IAAM,EAAIJ,EAAS,IAAPI,EAAE,IAAY,MAAME,SAAS,IAAIP,MAAM,EAAGK,EAAE,IAAM,GAAKC,EAAE,IAAM,OAAIE,GAAa,GAJvU,KA5Bf,mC,gCCAA,iGAAIC,EAAwC,SAAUC,EAASC,EAAYC,EAAGC,GAC1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAU/C,GAAS,IAAMgD,EAAKL,EAAUM,KAAKjD,IAAW,MAAOkD,GAAKJ,EAAOI,IACpF,SAASC,EAASnD,GAAS,IAAMgD,EAAKL,EAAS,MAAU3C,IAAW,MAAOkD,GAAKJ,EAAOI,IACvF,SAASF,EAAKI,GAAUA,EAAOC,KAAOR,EAAQO,EAAOpD,OAAS,IAAI0C,GAAE,SAAUG,GAAWA,EAAQO,EAAOpD,UAAWsD,KAAKP,EAAWI,GACnIH,GAAML,EAAYA,EAAUY,MAAMf,EAASC,GAAc,KAAKQ,YAGlEO,EAA4C,SAAUhB,EAASiB,GAC/D,IAAsGtB,EAAGuB,EAAGtB,EAAGuB,EAA3GC,EAAI,CAAEC,MAAO,EAAGC,KAAM,WAAa,GAAW,EAAP1B,EAAE,GAAQ,MAAMA,EAAE,GAAI,OAAOA,EAAE,IAAO2B,KAAM,GAAIC,IAAK,IAChG,OAAOL,EAAI,CAAEV,KAAMgB,EAAK,GAAI,MAASA,EAAK,GAAI,OAAUA,EAAK,IAAwB,oBAAXC,SAA0BP,EAAEO,OAAOC,UAAY,WAAa,OAAOC,OAAUT,EACvJ,SAASM,EAAKI,GAAK,OAAO,SAAUC,GAAK,OACzC,SAAcC,GACV,GAAIpC,EAAG,MAAM,IAAIqC,UAAU,mCAC3B,KAAOZ,GAAG,IACN,GAAIzB,EAAI,EAAGuB,IAAMtB,EAAY,EAARmC,EAAG,GAASb,EAAC,OAAaa,EAAG,GAAKb,EAAC,SAAetB,EAAIsB,EAAC,SAAetB,EAAEqC,KAAKf,GAAI,GAAKA,EAAET,SAAWb,EAAIA,EAAEqC,KAAKf,EAAGa,EAAG,KAAKlB,KAAM,OAAOjB,EAE3J,OADIsB,EAAI,EAAGtB,IAAGmC,EAAK,CAAS,EAARA,EAAG,GAAQnC,EAAEpC,QACzBuE,EAAG,IACP,KAAK,EAAG,KAAK,EAAGnC,EAAImC,EAAI,MACxB,KAAK,EAAc,OAAXX,EAAEC,QAAgB,CAAE7D,MAAOuE,EAAG,GAAIlB,MAAM,GAChD,KAAK,EAAGO,EAAEC,QAASH,EAAIa,EAAG,GAAIA,EAAK,CAAC,GAAI,SACxC,KAAK,EAAGA,EAAKX,EAAEI,IAAIU,MAAOd,EAAEG,KAAKW,MAAO,SACxC,QACI,KAAkBtC,GAAZA,EAAIwB,EAAEG,MAAYvD,OAAS,GAAK4B,EAAEA,EAAE5B,OAAS,MAAkB,IAAV+D,EAAG,IAAsB,IAAVA,EAAG,IAAW,CAAEX,EAAI,EAAG,SACjG,GAAc,IAAVW,EAAG,MAAcnC,GAAMmC,EAAG,GAAKnC,EAAE,IAAMmC,EAAG,GAAKnC,EAAE,IAAM,CAAEwB,EAAEC,MAAQU,EAAG,GAAI,MAC9E,GAAc,IAAVA,EAAG,IAAYX,EAAEC,MAAQzB,EAAE,GAAI,CAAEwB,EAAEC,MAAQzB,EAAE,GAAIA,EAAImC,EAAI,MAC7D,GAAInC,GAAKwB,EAAEC,MAAQzB,EAAE,GAAI,CAAEwB,EAAEC,MAAQzB,EAAE,GAAIwB,EAAEI,IAAIW,KAAKJ,GAAK,MACvDnC,EAAE,IAAIwB,EAAEI,IAAIU,MAChBd,EAAEG,KAAKW,MAAO,SAEtBH,EAAKd,EAAKgB,KAAKjC,EAASoB,GAC1B,MAAOV,GAAKqB,EAAK,CAAC,EAAGrB,GAAIQ,EAAI,EAjBrB,QAiBoCvB,EAAIC,EAAI,EACtD,GAAY,EAARmC,EAAG,GAAQ,MAAMA,EAAG,GAAI,MAAO,CAAEvE,MAAOuE,EAAG,GAAKA,EAAG,QAAK,EAAQlB,MAAM,GArB9BL,CAAK,CAACqB,EAAGC,OA8BzDM,EAAgC,WAChC,SAASC,EAAQC,GACbC,YAAiBX,KAAMU,GASvBV,KAAKY,WAAa,GAOlBZ,KAAKa,sBAAuB,EAO5Bb,KAAKc,eAAiBd,KAAKe,iBAO3Bf,KAAKgB,iBAAkB,EAOvBhB,KAAKiB,YAAa,EAQlBjB,KAAKkB,oBAAqB,EAO1BlB,KAAKmB,kBAAoBC,IAIzBpB,KAAK1D,WAAY,EAIjB0D,KAAKzD,MAAQ,GAIbyD,KAAKtD,iBAAmB,GAIxBsD,KAAKqB,oBAAsB,oBAI3BrB,KAAKsB,kBAAoB,+BACzBtB,KAAKuB,mBAAqB,GAC1BvB,KAAKwB,oBAAqB,EAC1BxB,KAAKyB,mBAAqBC,YAAY1B,KAAM,qBAAsB,GAmMtE,OAjMAS,EAAQkB,UAAUC,aAAe,WACxB5B,KAAKwB,qBACNxB,KAAKwB,mBAAqBK,QAAQ7B,KAAKY,YAAcZ,KAAKY,WAAWxE,UAG7EqE,EAAQkB,UAAUG,kBAAoB,WAClC9B,KAAKwB,mBAAqBK,QAAQ7B,KAAKY,YAAcZ,KAAKY,WAAWxE,SASzEqE,EAAQkB,UAAUZ,iBAAmB,SAAUnF,GAC3C,MAAO,GAAKD,YAAeC,IAQ/B6E,EAAQkB,UAAUI,sBAAwB,WACtC,OAAO5D,EAAU6B,UAAM,OAAQ,GAAQ,WACnC,OAAOZ,EAAYY,MAAM,SAAUgC,GAC/B,MAAO,CAAC,EAAchC,KAAKuB,2BAUvCd,EAAQkB,UAAUM,eAAiB,WAC/B,OAAO9D,EAAU6B,UAAM,OAAQ,GAAQ,WACnC,OAAOZ,EAAYY,MAAM,SAAUgC,GAC/B,OAAKhC,KAAKuB,mBAAmBnF,QAG7B4D,KAAKuB,mBAAqB,GAC1BvB,KAAKkC,uBACE,CAAC,IAJG,CAAC,UAQxBzB,EAAQkB,UAAUQ,OAAS,WACvB,OAAInC,KAAKoC,aACGvF,YAAE,iCAAkC,KAAMmD,KAAKqC,iBAEpD,CACHrC,KAAKqC,gBACLrC,KAAKsC,mBACLtC,KAAKuC,mBAGb9B,EAAQkB,UAAUW,iBAAmB,WACjC,IAAIE,EAAQxC,KACZ,GAAIA,KAAKoC,cAAgBpC,KAAKyC,YAAczC,KAAKzD,QAAUyD,KAAKgB,gBAC5D,MAAO,GAEX,IAAI0B,EAAgB1C,KAAKuB,mBAAmBnF,OAC5C,OAAOS,YAAE,sBAAuB,CAAE8F,WAAYD,GAAiB,OAAS,YAAaE,UAAW,kBAAmBC,UAAWH,EAAgB,EAAGI,QAAS,WAAc,OAAON,EAAMP,qBAEzLxB,EAAQkB,UAAUU,cAAgB,WAC9B,GAAKrC,KAAKiB,WAGV,OAAOpE,YAAE,mBAAoB,CAAEkG,OAAQ/C,KAAKvD,QAASuG,UAAWhD,KAAKiD,YAAa,WAAYjD,KAAKyC,WAAY,aAAczC,KAAKoC,aAAc7F,MAAOyD,KAAKzD,MAAO,kBAAmByD,KAAKqB,uBAE/LZ,EAAQkB,UAAUY,eAAiB,WAC/B,OAAOlG,aAAgB,EAAO2D,KAAKzD,MAAOyD,KAAKyC,WAAYzC,KAAKvD,QAASuD,KAAKtD,iBAAkBsD,KAAKsB,kBAAmBtB,KAAKkD,wBAEjIzC,EAAQkB,UAAUuB,oBAAsB,WACpC,IAAIC,EAAa,CACb,4BAA4B,EAC5B,qCAAsCnD,KAAKa,sBAE/C,OAAOhE,YAAE,KAAM,CAAEC,MAAOqG,GAAcnD,KAAKoD,sBAE/C3C,EAAQkB,UAAUyB,kBAAoB,WAClC,IAGIC,EAHAb,EAAQxC,KACRsD,EAA4BtD,KAAKY,WAAWxE,OAAS4D,KAAKmB,kBAC1Da,EAAKhC,KAAKuD,mBAAoB3C,EAAaoB,EAAGpB,WAAY4C,EAAgBxB,EAAGwB,cAE7EC,EAAqB7C,EAAWlD,MAAM,EAAGsC,KAAKmB,mBAC9CuC,EAAe1D,KAAKkB,mBAClBlB,KAAK2D,yBAAyB3D,KAAKY,YACnCZ,KAAK4D,2BAA2BhD,EAAYiB,QAAQ2B,IAI1D,OAHIA,GAAiBF,KACjBD,EAAwBrD,KAAK6D,qBAAqBL,EAAe,CAAEE,aAAcA,KAE9E,CACHD,EAAmBK,KAAI,SAAUC,GAAY,OAAOvB,EAAMwB,gBAAgBD,EAAU,CAAEL,aAAcA,OACpGL,IAGR5C,EAAQkB,UAAUqC,gBAAkB,SAAUD,EAAUE,GACpD,IAAIzB,EAAQxC,KACRkE,EAAUD,EAAQC,QAASR,EAAeO,EAAQP,aAClDS,EAAanE,KAAKoE,YAAYL,EAASM,MACvCC,EAAwBtE,KAAKuB,mBAAmBnF,OAAS,EACzDmI,EAAWvE,KAAKwE,aAAaT,EAASU,MAAO,CAAEN,WAAYA,EAAYD,QAASA,IAChFQ,EAAiB,CACjBC,gBAAiBJ,GAAsB,iCACvCK,MAAQb,EAASnI,MAAQ8H,EAAgB,IAAM,KAE/CP,EAAa,CACb,gCAAgC,EAChC,6CAA8CmB,KAA2BH,GAAcD,GACvF,sCAAuCA,EACvC,yCAA0CC,GAE1CU,EAAe7E,KAAKc,eAAeiD,EAASnI,OAChD,OAAQiB,YAAE,KAAM,CAAEC,MAAOqG,EAAY2B,QAAS,WAAc,OAAOtC,EAAMuC,gBAAgBhB,KAAgBlH,YAAE,IAAK,CAAEC,MAAO,oCAAsCD,YAAE,MAAO,CAAEC,MAAO,6BAA+BiH,EAASM,MAAOQ,GAAehI,YAAE,MAAO,CAAEC,MAAO,2BAA6BD,YAAE,MAAO,CAAEC,MAAO,gCAAiCkI,MAAON,OAE5VjE,EAAQkB,UAAUkC,qBAAuB,SAAUE,EAAUE,GACzD,IAAIgB,EAAelB,GAAY,CAC3BM,KAAM,QACNzI,MAAOoE,KAAK2D,yBAAyB3D,KAAKY,WAAWlD,MAAMsC,KAAKmB,kBAAmBnB,KAAKY,WAAWxE,UAEvG,OAAO4D,KAAKgE,gBAAgBiB,EAAc,CAAEvB,aAAcO,EAAQP,aAAcQ,SAAS,KAE7FzD,EAAQkB,UAAUyC,YAAc,SAAUc,GACtC,OAAOlF,KAAKuB,mBAAmB4D,SAASD,IAE5CzE,EAAQkB,UAAUoD,gBAAkB,SAAUhB,GACtC/D,KAAKa,uBAGTb,KAAKuB,mBAAqBvB,KAAKoE,YAAYL,EAASM,MAC9CrE,KAAKuB,mBAAmB6D,QAAO,SAAUC,GAAmB,OAAOA,IAAoBtB,EAASM,QAChGrE,KAAKuB,mBAAmB+D,OAAO,CAACvB,EAASM,OAC/CrE,KAAKkC,yBAETzB,EAAQkB,UAAUO,qBAAuB,WACrClC,KAAKyB,mBAAmB8D,KAAKvF,KAAKuB,qBAEtCd,EAAQkB,UAAUiC,2BAA6B,SAAUhD,EAAY4E,GAEjE,YAD6B,IAAzBA,IAAmCA,GAAuB,GACvDxF,KAAKyF,sBAAsB7E,EAAY4E,GAAsBE,QAAO,SAAUC,EAASN,GAAmB,OAAOA,EAAgBzJ,MAAQ+J,EAAUN,EAAgBzJ,MAAQ+J,IAAY,IAElMlF,EAAQkB,UAAUgC,yBAA2B,SAAU/C,GACnD,OAAOA,EAAW8E,QAAO,SAAUE,EAAKP,GAAmB,OAAOA,EAAgBzJ,MAAQgK,IAAQ,IAEtGnF,EAAQkB,UAAU6C,aAAe,SAAUC,EAAOR,GAE9C,YADgB,IAAZA,IAAsBA,EAAU,IAChCA,EAAQC,QAvOO,UA0OfD,EAAQE,WACDpH,aAAc,IAAM0H,GAExBA,GAEXhE,EAAQkB,UAAU4B,iBAAmB,WACjC,IAAIC,EAAgBxD,KAAKY,WAAWiF,MAAK,SAAU9B,GAAY,MA/O7C,UA+OoDA,EAASM,QAC/E,OAAIb,EAGO,CAAE5C,WAFQZ,KAAKY,WACjBwE,QAAO,SAAUrB,GAAY,OAAOA,EAASM,OAASb,EAAca,QACxCb,cAAeA,GAE7C,CAAE5C,WAAYZ,KAAKY,aAE9BH,EAAQkB,UAAU8D,sBAAwB,SAAUK,EAAkBN,GAClE,OAAIA,EACOM,EAEJA,EAAiBpI,MAAM,EAAGsC,KAAKmB,oBAE1CV,EAAQkB,UAAUS,WAAa,WAC3B,QAASpC,KAAKwB,oBAAsBxB,KAAK1D,aAAe0D,KAAKzD,OAEjEkE,EAAQkB,UAAUc,SAAW,WACzB,OAAOzC,KAAKY,aAAeZ,KAAKY,WAAWxE,QAE/C2J,OAAOC,eAAevF,EAAS,WAAY,CACvCwF,IAAK,WACD,MAAO,CACH,WAAc,CAAC,kBAGvBC,YAAY,EACZC,cAAc,IAElBJ,OAAOC,eAAevF,EAAS,QAAS,CACpCwF,IAAK,WAAc,MAAO,4tEAC1BC,YAAY,EACZC,cAAc,IAEX1F,EAhRyB","file":"static/js/5.d49b8279.chunk.js","sourcesContent":["/**\n *  Convert long numbers to\n *  readizable numbers.\n *\n *  Ex: 1200 -> 1.2K\n */\nfunction readableNumber(value) {\n    var roundedNumber = Math.abs(Math.ceil(value * 100) / 100);\n    if (roundedNumber >= 1000000000) {\n        return ((roundedNumber / 1000000000).toFixed(1) + \"G\").padStart(5);\n    }\n    if (roundedNumber >= 1000000) {\n        return ((roundedNumber / 1000000).toFixed(1) + \"M\").padStart(5);\n    }\n    if (roundedNumber >= 1000) {\n        return ((roundedNumber / 1000).toFixed(1) + \"K\").padStart(5);\n    }\n    var roundedStr = \"\" + roundedNumber;\n    // This seems backwards but it's an Edge issue.\n    // padStart(5) looks weird for 0 - 9, looks better with padStart(8)\n    // 10 - 99 looks better with padStart(7)\n    return roundedStr.padStart(6 + Math.abs(roundedStr.length - 3));\n}\nexport { readableNumber as r };\n","import { h } from './core-a69618da.js';\n/**\n * Common fragment used in widgets to manage status.\n *\n * @param isLoading\n * @param error\n * @param isEmpty\n * @param heading\n * @param errorDescription\n * @param noDataMessage\n * @param fragment\n */\nfunction contentFragment(isLoading, error, isEmpty, heading, errorDescription, noDataMessage, fragment) {\n    if (isLoading) {\n        return h(\"as-loader\", { class: heading ? 'content as-pb--36' : 'content as-pb--20' });\n    }\n    if (error) {\n        return h(\"p\", { class: 'content as-body' }, errorDescription || 'Unexpected error');\n    }\n    if (isEmpty) {\n        return h(\"p\", { class: 'content as-body' }, noDataMessage);\n    }\n    return fragment;\n}\nexport { contentFragment as c };\n","// pSBC.js\n// From Pimped JavaScript (https://github.com/PimpTrizkit/PJs)\n// Usage: https://github.com/PimpTrizkit/PJs/wiki/12.-Shade,-Blend-and-Convert-a-Web-Color-(pSBC.js)\n/* tslint:disable */\nfunction shadeOrBlend(p, from, to) {\n    if (typeof (p) != \"number\" || p < -1 || p > 1 || typeof (from) != \"string\" || (from[0] != 'r' && from[0] != '#') || (to && typeof (to) != \"string\"))\n        return null; //ErrorCheck\n    var pSBCr = function (d) {\n        var l = d.length, RGB = {};\n        if (l > 9) {\n            d = d.split(\",\");\n            if (d.length < 3 || d.length > 4)\n                return null; //ErrorCheck\n            RGB[0] = i(d[0].split(\"(\")[1]), RGB[1] = i(d[1]), RGB[2] = i(d[2]), RGB[3] = d[3] ? parseFloat(d[3]) : -1;\n        }\n        else {\n            if (l == 8 || l == 6 || l < 4)\n                return null; //ErrorCheck\n            if (l < 6)\n                d = \"#\" + d[1] + d[1] + d[2] + d[2] + d[3] + d[3] + (l > 4 ? d[4] + \"\" + d[4] : \"\"); //3 or 4 digit\n            d = i(d.slice(1), 16), RGB[0] = d >> 16 & 255, RGB[1] = d >> 8 & 255, RGB[2] = d & 255, RGB[3] = -1;\n            if (l == 9 || l == 5)\n                RGB[3] = r((RGB[2] / 255) * 10000) / 10000, RGB[2] = RGB[1], RGB[1] = RGB[0], RGB[0] = d >> 24 & 255;\n        }\n        return RGB;\n    };\n    var i = parseInt, r = Math.round, h = from.length > 9, h = typeof (to) == \"string\" ? to.length > 9 ? true : to == \"c\" ? !h : false : h, b = p < 0, p = b ? p * -1 : p, to = to && to != \"c\" ? to : b ? \"#000000\" : \"#FFFFFF\", f = pSBCr(from), t = pSBCr(to);\n    if (!f || !t)\n        return null; //ErrorCheck\n    if (h)\n        return \"rgb\" + (f[3] > -1 || t[3] > -1 ? \"a(\" : \"(\") + r((t[0] - f[0]) * p + f[0]) + \",\" + r((t[1] - f[1]) * p + f[1]) + \",\" + r((t[2] - f[2]) * p + f[2]) + (f[3] < 0 && t[3] < 0 ? \")\" : \",\" + (f[3] > -1 && t[3] > -1 ? r(((t[3] - f[3]) * p + f[3]) * 10000) / 10000 : t[3] < 0 ? f[3] : t[3]) + \")\");\n    else\n        return \"#\" + (0x100000000 + r((t[0] - f[0]) * p + f[0]) * 0x1000000 + r((t[1] - f[1]) * p + f[1]) * 0x10000 + r((t[2] - f[2]) * p + f[2]) * 0x100 + (f[3] > -1 && t[3] > -1 ? r(((t[3] - f[3]) * p + f[3]) * 255) : t[3] > -1 ? r(t[3] * 255) : f[3] > -1 ? r(f[3] * 255) : 255)).toString(16).slice(1, f[3] > -1 || t[3] > -1 ? undefined : -2);\n}\n/* tslint:enable */\nexport { shadeOrBlend as s };\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { r as registerInstance, c as createEvent, h } from './core-a69618da.js';\nimport { c as contentFragment } from './content.fragment-e220039c.js';\nimport { r as readableNumber } from './readable-number-b11b551f.js';\nimport { s as shadeOrBlend } from './styles-b283ec9e.js';\nvar OTHER_CATEGORY_COLOR = '#747474';\nvar OTHER_CATEGORY_NAME = 'Other';\nvar CategoryWidget = /** @class */ (function () {\n    function class_1(hostRef) {\n        registerInstance(this, hostRef);\n        /**\n         * Array of categories to display in the widget.\n         * Each category should include a `name` and a `value`.\n         * You can also override the bar color for each category with `color`.\n         *\n         * @type {object[]}\n         * @memberof CategoryWidget\n         */\n        this.categories = [];\n        /**\n         * Disable category selection in Widget\n         *\n         * @type {string}\n         * @memberof CategoryWidget\n         */\n        this.disableInteractivity = false;\n        /**\n         * If this property receives a function, it will be used to format the numbers (eg. for adding $ or €).\n         *\n         * @type {function (value: number)}\n         * @memberof RangeSlider\n         */\n        this.valueFormatter = this.defaultFormatter;\n        /**\n         * If truthy, it'll show a button to clear selected categories when there are any. Default value is `false`.\n         *\n         * @type {boolean}\n         * @memberof CategoryWidget\n         */\n        this.showClearButton = false;\n        /**\n         * If truthy, it'll render the heading and component's description. Default value is `true`.\n         *\n         * @type {boolean}\n         * @memberof CategoryWidget\n         */\n        this.showHeader = true;\n        /**\n         * If truthy, we'll use the sum of all categories' value to render the bar percentage.\n         * By default, we use the maximum category value to render the bar percentage.\n         *\n         * @type {boolean}\n         * @memberof CategoryWidget\n         */\n        this.useTotalPercentage = false;\n        /**\n         * The number of visible categories without aggregation.\n         *\n         * @type {number}\n         * @memberof CategoryWidget\n         */\n        this.visibleCategories = Infinity;\n        /**\n         * Boolean property to control the widget loading state. If true, a spinner is shown.\n         */\n        this.isLoading = false;\n        /**\n         * Text shown in the header subtitle when there's an error\n         */\n        this.error = '';\n        /**\n         * Extended error description, only shown when error is present\n         */\n        this.errorDescription = '';\n        /**\n         * Message shown in header when no data is available\n         */\n        this.noDataHeaderMessage = 'NO DATA AVAILABLE';\n        /**\n         * Message shown in body when no data is available\n         */\n        this.noDataBodyMessage = 'There is no data to display.';\n        this.selectedCategories = [];\n        this._firstDataSupplied = false;\n        this.categoriesSelected = createEvent(this, \"categoriesSelected\", 7);\n    }\n    class_1.prototype.onDataChange = function () {\n        if (!this._firstDataSupplied) {\n            this._firstDataSupplied = Boolean(this.categories && this.categories.length);\n        }\n    };\n    class_1.prototype.componentWillLoad = function () {\n        this._firstDataSupplied = Boolean(this.categories && this.categories.length);\n    };\n    /**\n     * Default formatting function. Makes the value a readable number and\n     * converts it into a string. Useful to compose with your own formatting\n     * function.\n     *\n     * @memberof CategoryWidget\n     */\n    class_1.prototype.defaultFormatter = function (value) {\n        return \"\" + readableNumber(value);\n    };\n    /**\n     * Get current selected categories\n     *\n     * @returns\n     * @memberof CategoryWidget\n     */\n    class_1.prototype.getSelectedCategories = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2 /*return*/, this.selectedCategories];\n            });\n        });\n    };\n    /**\n     * Clear current selected categories\n     *\n     * @returns\n     * @memberof CategoryWidget\n     */\n    class_1.prototype.clearSelection = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                if (!this.selectedCategories.length) {\n                    return [2 /*return*/];\n                }\n                this.selectedCategories = [];\n                this._onCategoriesChanged();\n                return [2 /*return*/];\n            });\n        });\n    };\n    class_1.prototype.render = function () {\n        if (this._isLoading()) {\n            return (h(\"as-category-widget-placeholder\", null, this._renderHeader()));\n        }\n        return [\n            this._renderHeader(),\n            this._renderSelection(),\n            this._renderContent(),\n        ];\n    };\n    class_1.prototype._renderSelection = function () {\n        var _this = this;\n        if (this._isLoading() || this._isEmpty() || this.error || !this.showClearButton) {\n            return '';\n        }\n        var selectedCount = this.selectedCategories.length;\n        return h(\"as-widget-selection\", { selection: (selectedCount || 'All') + \" selected\", clearText: 'Clear selection', showClear: selectedCount > 0, onClear: function () { return _this.clearSelection(); } });\n    };\n    class_1.prototype._renderHeader = function () {\n        if (!this.showHeader) {\n            return;\n        }\n        return h(\"as-widget-header\", { header: this.heading, subheader: this.description, \"is-empty\": this._isEmpty(), \"is-loading\": this._isLoading(), error: this.error, \"no-data-message\": this.noDataHeaderMessage });\n    };\n    class_1.prototype._renderContent = function () {\n        return contentFragment(false, this.error, this._isEmpty(), this.heading, this.errorDescription, this.noDataBodyMessage, this._renderCategoryList());\n    };\n    class_1.prototype._renderCategoryList = function () {\n        var cssClasses = {\n            'as-category-widget__list': true,\n            'as-category-widget__list--disabled': this.disableInteractivity\n        };\n        return h(\"ul\", { class: cssClasses }, this._renderCategories());\n    };\n    class_1.prototype._renderCategories = function () {\n        var _this = this;\n        var moreCategoriesThanVisible = this.categories.length > this.visibleCategories;\n        var _a = this._parseCategories(), categories = _a.categories, otherCategory = _a.otherCategory;\n        var otherCategoryTemplate;\n        var categoriesToRender = categories.slice(0, this.visibleCategories);\n        var maximumValue = this.useTotalPercentage\n            ? this._getCategoriesTotalValue(this.categories)\n            : this._getCategoriesMaximumValue(categories, Boolean(otherCategory));\n        if (otherCategory || moreCategoriesThanVisible) {\n            otherCategoryTemplate = this._renderOtherCategory(otherCategory, { maximumValue: maximumValue });\n        }\n        return [\n            categoriesToRender.map(function (category) { return _this._renderCategory(category, { maximumValue: maximumValue }); }),\n            otherCategoryTemplate\n        ];\n    };\n    class_1.prototype._renderCategory = function (category, options) {\n        var _this = this;\n        var isOther = options.isOther, maximumValue = options.maximumValue;\n        var isSelected = this._isSelected(category.name);\n        var isAnyCategorySelected = this.selectedCategories.length > 0;\n        var barColor = this._getBarColor(category.color, { isSelected: isSelected, isOther: isOther });\n        var progressStyles = {\n            backgroundColor: barColor ? barColor : \"var(--as--category-bar--color)\",\n            width: (category.value / maximumValue) * 100 + \"%\"\n        };\n        var cssClasses = {\n            'as-category-widget__category': true,\n            'as-category-widget__category--not-selected': isAnyCategorySelected && (!isSelected || isOther),\n            'as-category-widget__category--other': isOther,\n            'as-category-widget__category--selected': isSelected\n        };\n        var displayValue = this.valueFormatter(category.value);\n        return (h(\"li\", { class: cssClasses, onClick: function () { return _this._toggleCategory(category); } }, h(\"p\", { class: 'as-category-widget__info as-body' }, h(\"div\", { class: 'as-category-widget__title' }, category.name), displayValue), h(\"div\", { class: 'as-category-widget__bar' }, h(\"div\", { class: 'as-category-widget__bar-value', style: progressStyles }))));\n    };\n    class_1.prototype._renderOtherCategory = function (category, options) {\n        var categoryData = category || {\n            name: 'Other',\n            value: this._getCategoriesTotalValue(this.categories.slice(this.visibleCategories, this.categories.length))\n        };\n        return this._renderCategory(categoryData, { maximumValue: options.maximumValue, isOther: true });\n    };\n    class_1.prototype._isSelected = function (categoryName) {\n        return this.selectedCategories.includes(categoryName);\n    };\n    class_1.prototype._toggleCategory = function (category) {\n        if (this.disableInteractivity) {\n            return;\n        }\n        this.selectedCategories = this._isSelected(category.name)\n            ? this.selectedCategories.filter(function (currentCategory) { return currentCategory !== category.name; })\n            : this.selectedCategories.concat([category.name]);\n        this._onCategoriesChanged();\n    };\n    class_1.prototype._onCategoriesChanged = function () {\n        this.categoriesSelected.emit(this.selectedCategories);\n    };\n    class_1.prototype._getCategoriesMaximumValue = function (categories, otherCategoryPresent) {\n        if (otherCategoryPresent === void 0) { otherCategoryPresent = false; }\n        return this._getVisibleCategories(categories, otherCategoryPresent).reduce(function (maximum, currentCategory) { return currentCategory.value > maximum ? currentCategory.value : maximum; }, 0);\n    };\n    class_1.prototype._getCategoriesTotalValue = function (categories) {\n        return categories.reduce(function (sum, currentCategory) { return currentCategory.value + sum; }, 0);\n    };\n    class_1.prototype._getBarColor = function (color, options) {\n        if (options === void 0) { options = {}; }\n        if (options.isOther) {\n            return OTHER_CATEGORY_COLOR;\n        }\n        if (options.isSelected) {\n            return shadeOrBlend(-0.16, color);\n        }\n        return color;\n    };\n    class_1.prototype._parseCategories = function () {\n        var otherCategory = this.categories.find(function (category) { return category.name === OTHER_CATEGORY_NAME; });\n        if (otherCategory) {\n            var categories = this.categories\n                .filter(function (category) { return category.name !== otherCategory.name; });\n            return { categories: categories, otherCategory: otherCategory };\n        }\n        return { categories: this.categories };\n    };\n    class_1.prototype._getVisibleCategories = function (parsedCategories, otherCategoryPresent) {\n        if (otherCategoryPresent) {\n            return parsedCategories;\n        }\n        return parsedCategories.slice(0, this.visibleCategories);\n    };\n    class_1.prototype._isLoading = function () {\n        return (!this._firstDataSupplied || this.isLoading) && !this.error;\n    };\n    class_1.prototype._isEmpty = function () {\n        return this.categories && !this.categories.length;\n    };\n    Object.defineProperty(class_1, \"watchers\", {\n        get: function () {\n            return {\n                \"categories\": [\"onDataChange\"]\n            };\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(class_1, \"style\", {\n        get: function () { return \"as-category-widget{--as--category-bar--background-color:var(--as--color--ui-02,#f5f5f5);--as--category-bar--color:var(--as--color--complementary,#47db99);--as--category-widget--background-color:var(--as--color--ui-01,#fff);--as--category-widget--bar--height:4px;--as--category-widget--description--color:var(--as--color--type-02,#747474);display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;min-width:228px;height:100%;overflow-y:auto;background:var(--as--category-widget--background-color)}as-category-widget .content{min-height:100px}as-category-widget as-widget-header{padding-top:6px}as-category-widget .as-category-widget__count{color:var(--as--category-widget--description--color)}as-category-widget .as-category-widget__list{-ms-flex:1;flex:1;margin:0;padding:0;overflow-y:auto;list-style:none}as-category-widget .as-category-widget__list.as-category-widget__list--disabled li{pointer-events:none}as-category-widget .as-category-widget__footer{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}as-category-widget .as-category-widget__list+.as-category-widget__footer{margin-top:16px}as-category-widget .as-category-widget__info{display:-ms-flexbox;display:flex;-ms-flex-pack:justify;justify-content:space-between}as-category-widget .as-category-widget__title{-ms-flex:1;flex:1;width:100%;padding-right:8px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}as-category-widget .as-category-widget__bar{position:relative;width:100%;height:var(--as--category-widget--bar--height);border-radius:2px;background-color:var(--as--category-bar--background-color)}as-category-widget .as-category-widget__bar-value{position:absolute;left:0;max-width:100%;height:var(--as--category-widget--bar--height);-webkit-transition:background .2s ease,opacity .5s ease;transition:background .2s ease,opacity .5s ease;border-radius:2px}as-category-widget .as-category-widget__category{margin-bottom:8px;cursor:pointer}as-category-widget .as-category-widget__category--other{pointer-events:none}as-category-widget .as-category-widget__category--not-selected{opacity:.5}as-category-widget .as-category-widget__category:not(.as-category-widget__category--selected):hover .as-category-widget__bar-value{opacity:.6}\"; },\n        enumerable: true,\n        configurable: true\n    });\n    return class_1;\n}());\nexport { CategoryWidget as as_category_widget };\n"],"sourceRoot":""}