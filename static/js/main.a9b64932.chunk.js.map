{"version":3,"sources":["components/Form/img/zone.svg","components/Form/img/symptom.svg","components/Form/img/age.svg","../node_modules/@carto/airship-components/dist/esm-es5 lazy /^/.//.*/.entry/.js$/ include: //.entry/.js$/ exclude: //.system/.entry/.js$/ groupOptions: {} namespace object","store/store.js","layers/Sources/index.js","layers/Classes/MapboxHoverEffect.js","layers/Hooks/useMapEvents.js","components/Loader/index.js","components/PopupTemplate/index.js","components/WidgetsContainer/index.jsx","components/LayerSelector/index.js","components/Geocoder/index.jsx","utils/config.js","utils/requests.js","components/Form/index.jsx","components/Footer/index.jsx","layers/Config/config.js","layers/Layers/index.js","layers/Classes/CartoMVTRequest.js","layers/Config/queries.js","layers/Config/paints.js","layers/Hooks/useCartoTiles.js","map/index.js","index.js"],"names":["module","exports","map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","all","slice","keys","Object","initialState","dataLoading","selectedLayer","form","forceUpdate","steps","where","symptom","age","thanks","userInfo","userAddressXY","userSymptom","userAge","store","createContext","Provider","handleSteps","state","targetStep","newObj","tab","Sources","config","sourceLoad","React","useState","sourcesLoaded","setLoaded","useEffect","values","info","every","k","isSource","key","sourceId","tileJsonSource","type","tiles","pbf","promoteId","undefined","onSourceLoaded","layer","HoverEffect","definition","this","sourceLayer","popupFieldsConfig","_hoveredFeature","_hoveredId","_popupInfo","getCanvas","style","cursor","features","length","setFeatureState","source","hover","coords","lngLat","popupFields","featureProperties","properties","popupField","hasOwnProperty","lng","lat","shouldRender","value","useMapEvents","layersIds","popupConfig","setPopupConfig","clickedFeature","setClickedFeature","mapObject","hoverObjects","i","push","on","mouseMove","popup","popupInfo","mouseLeave","enableEvents","off","removeEvents","propTypes","PropTypes","instanceOf","Map","isRequired","shape","cadastre_id","object","Loader","globalState","useContext","dispatch","tilesRenderedChecker","once","waiting","isStyleLoaded","payload","setTimeout","className","viewBox","cx","cy","r","fill","component","memo","content","infos","setInfos","index","fieldLabel","Intl","NumberFormat","format","label","prevProps","nextProps","positions","top","right","bottom","left","POSITIONS","WidgetsContainer","children","position","Array","isArray","child","defaultProps","LayerSelector","layers","shouldShowOnInit","switchVisibility","getLayer","includes","setLayoutProperty","name","checked","onChange","target","htmlFor","layerTitle","Geocoder","geocoderContainerRef","useRef","center","setCenter","geocoderObject","setGeocoderObject","MapboxGeocoder","accessToken","mapboxgl","flyTo","marker","color","placeholder","countries","current","appendChild","onAdd","result","clear","ref","CARTO_ENDPOINT","query","fetchData","endpoint","a","fetch","promise","defineCustomElements","window","Form","symptomDropdownRef","ageDropdownRef","seeMapButtonRef","options","text","addEventListener","event","detail","setProperty","alt","src","zoneSvg","symptomSvg","opacity","ageSvg","display","default-text","can-clear","onClick","long","response","json","rows","gridId","totalType","UPDATE_DATA_QUERY","ok","zoom","essential","catch","err","alert","Footer","open","Layers","CONFIG","centerIn","geometry","coordinates","Math","round","getZoom","paint","layout","minZoom","maxZoom","offset","CartoMVTRequest","cartoAccount","cartoMapsKey","sql","getGeoJSON","aggregationConfig","mapConfig","buffersize","mvt","aggregation","method","headers","body","JSON","stringify","layergroup","metadata","tilejson","vector","carto_account","carto_maps_key","request_id","sql_query","aggregation_config","voronoi","cluster","aggregatedField","pharmacy","supermarket","label_paint","labelField","textColor","infected","Number","MAX_SAFE_INTEGER","useCartoTiles","layersConfig","setLayers","getTiles","voronoiInfo","QUERY","pharmacyClusterInfo","threshold","placement","columns","aggregate_function","aggregated_column","filters","greater_than","resolution","pharmacyInfo","supermarketInfo","supermarketClusterInfo","supermarketsVoronoiInfo","infectedInfo","pharmacy_voronoi_source","pharmacy_voronoi_layer","PAINT","pharmacy_raw_source","pharmacy_raw_layer","nombre","direccion","pharmacy_cluster_source","pharmacy_cluster_layer","pharmacy_cluster_labels_layer","supermarkets_voronoi_source","supermarkets_voronoi_layer","supermarkets_raw_source","supermarkets_raw_layer","supermarkets_cluster_source","supermarkets_cluster_layer","supermarket_cluster_labels_layer","infected_source","infected_layer","type_3","infected_layer_was","type_2","infected_layer_test","type_1","infected_layer_no","type_0","mapFilters","oneOfType","ReactMapboxGL","dragRotate","layersVisibilityConfig","MapboxMap","setMap","allLoaded","setAllLoaded","supported","containerStyle","width","height","Consumer","app","useReducer","action","payloade","ReactDOM","render","document","getElementById"],"mappings":"sGAAAA,EAAOC,QAAU,IAA0B,kC,mBCA3CD,EAAOC,QAAU,IAA0B,qC,mBCA3CD,EAAOC,QAAU,IAA0B,iC,gKCA3C,IAAIC,EAAM,CACT,0CAA2C,CAC1C,GACA,GAED,4CAA6C,CAC5C,GACA,IAED,gCAAiC,CAChC,GACA,GAED,yBAA0B,CACzB,GACA,IAED,+CAAgD,CAC/C,GACA,IAED,iCAAkC,CACjC,GACA,EACA,EACA,GAED,2BAA4B,CAC3B,GACA,IAED,oCAAqC,CACpC,GACA,IAED,+BAAgC,CAC/B,GACA,IAED,kCAAmC,CAClC,GACA,IAED,uCAAwC,CACvC,GACA,IAED,wCAAyC,CACxC,GACA,IAED,0CAA2C,CAC1C,GACA,IAED,kCAAmC,CAClC,GACA,IAED,2CAA4C,CAC3C,GACA,IAED,4CAA6C,CAC5C,GACA,IAED,8CAA+C,CAC9C,IACA,IAED,sCAAuC,CACtC,IACA,IAED,6CAA8C,CAC7C,IACA,IAED,8CAA+C,CAC9C,IACA,IAED,gDAAiD,CAChD,IACA,IAED,wCAAyC,CACxC,IACA,IAED,sCAAuC,CACtC,IACA,IAED,uCAAwC,CACvC,IACA,IAED,iCAAkC,CACjC,IACA,IAED,0CAA2C,CAC1C,IACA,IAED,2CAA4C,CAC3C,IACA,IAED,qCAAsC,CACrC,IACA,IAED,8CAA+C,CAC9C,IACA,IAED,uCAAwC,CACvC,IACA,IAED,uBAAwB,CACvB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,iCAAkC,CACjC,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,mCAAoC,CACnC,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,mCAAoC,CACnC,IACA,IAED,mCAAoC,CACnC,IACA,EACA,EACA,IAED,uBAAwB,CACvB,IACA,IAED,qBAAsB,CACrB,IACA,IAED,mCAAoC,CACnC,IACA,EACA,GAED,wBAAyB,CACxB,IACA,IAED,8BAA+B,CAC9B,IACA,IAED,uBAAwB,CACvB,IACA,EACA,IAGF,SAASC,EAAoBC,GAC5B,IAAIC,EAAoBC,EAAEJ,EAAKE,GAC9B,OA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","file":"static/js/main.a9b64932.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/zone.f9bf61af.svg\";","module.exports = __webpack_public_path__ + \"static/media/symptom.2198b16d.svg\";","module.exports = __webpack_public_path__ + \"static/media/age.56dae5c5.svg\";","var map = {\n\t\"./as-animation-controls-widget.entry.js\": [\n\t\t84,\n\t\t7\n\t],\n\t\"./as-category-widget-placeholder.entry.js\": [\n\t\t85,\n\t\t16\n\t],\n\t\"./as-category-widget.entry.js\": [\n\t\t86,\n\t\t5\n\t],\n\t\"./as-dropdown.entry.js\": [\n\t\t87,\n\t\t17\n\t],\n\t\"./as-histogram-widget-placeholder_3.entry.js\": [\n\t\t88,\n\t\t18\n\t],\n\t\"./as-histogram-widget.entry.js\": [\n\t\t89,\n\t\t0,\n\t\t1,\n\t\t8\n\t],\n\t\"./as-infowindow.entry.js\": [\n\t\t90,\n\t\t19\n\t],\n\t\"./as-layer-selector-slot.entry.js\": [\n\t\t91,\n\t\t20\n\t],\n\t\"./as-layer-selector.entry.js\": [\n\t\t92,\n\t\t21\n\t],\n\t\"./as-legend-category_4.entry.js\": [\n\t\t93,\n\t\t10\n\t],\n\t\"./as-legend-color-bins-line.entry.js\": [\n\t\t94,\n\t\t22\n\t],\n\t\"./as-legend-color-bins-point.entry.js\": [\n\t\t95,\n\t\t23\n\t],\n\t\"./as-legend-color-bins-polygon.entry.js\": [\n\t\t96,\n\t\t24\n\t],\n\t\"./as-legend-color-bins.entry.js\": [\n\t\t97,\n\t\t25\n\t],\n\t\"./as-legend-color-category-line.entry.js\": [\n\t\t98,\n\t\t26\n\t],\n\t\"./as-legend-color-category-point.entry.js\": [\n\t\t99,\n\t\t27\n\t],\n\t\"./as-legend-color-category-polygon.entry.js\": [\n\t\t100,\n\t\t28\n\t],\n\t\"./as-legend-color-category.entry.js\": [\n\t\t101,\n\t\t29\n\t],\n\t\"./as-legend-color-continuous-line.entry.js\": [\n\t\t102,\n\t\t30\n\t],\n\t\"./as-legend-color-continuous-point.entry.js\": [\n\t\t103,\n\t\t31\n\t],\n\t\"./as-legend-color-continuous-polygon.entry.js\": [\n\t\t104,\n\t\t32\n\t],\n\t\"./as-legend-color-continuous.entry.js\": [\n\t\t105,\n\t\t33\n\t],\n\t\"./as-legend-size-bins-line.entry.js\": [\n\t\t106,\n\t\t34\n\t],\n\t\"./as-legend-size-bins-point.entry.js\": [\n\t\t107,\n\t\t11\n\t],\n\t\"./as-legend-size-bins.entry.js\": [\n\t\t108,\n\t\t35\n\t],\n\t\"./as-legend-size-category-line.entry.js\": [\n\t\t109,\n\t\t36\n\t],\n\t\"./as-legend-size-category-point.entry.js\": [\n\t\t110,\n\t\t37\n\t],\n\t\"./as-legend-size-category.entry.js\": [\n\t\t111,\n\t\t38\n\t],\n\t\"./as-legend-size-continuous-line_2.entry.js\": [\n\t\t112,\n\t\t12\n\t],\n\t\"./as-legend-size-continuous.entry.js\": [\n\t\t113,\n\t\t39\n\t],\n\t\"./as-legend.entry.js\": [\n\t\t114,\n\t\t40\n\t],\n\t\"./as-loader_2.entry.js\": [\n\t\t115,\n\t\t41\n\t],\n\t\"./as-placeholder-list.entry.js\": [\n\t\t116,\n\t\t42\n\t],\n\t\"./as-placeholder_2.entry.js\": [\n\t\t117,\n\t\t43\n\t],\n\t\"./as-range-slider-bar_2.entry.js\": [\n\t\t118,\n\t\t44\n\t],\n\t\"./as-range-slider.entry.js\": [\n\t\t119,\n\t\t45\n\t],\n\t\"./as-responsive-content.entry.js\": [\n\t\t120,\n\t\t13\n\t],\n\t\"./as-stacked-bar-widget.entry.js\": [\n\t\t121,\n\t\t0,\n\t\t1,\n\t\t14\n\t],\n\t\"./as-switch.entry.js\": [\n\t\t122,\n\t\t46\n\t],\n\t\"./as-tabs.entry.js\": [\n\t\t123,\n\t\t15\n\t],\n\t\"./as-time-series-widget.entry.js\": [\n\t\t124,\n\t\t0,\n\t\t9\n\t],\n\t\"./as-toolbar.entry.js\": [\n\t\t125,\n\t\t47\n\t],\n\t\"./as-widget-legend.entry.js\": [\n\t\t126,\n\t\t48\n\t],\n\t\"./as-y-axis.entry.js\": [\n\t\t127,\n\t\t0,\n\t\t6\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 76;\nmodule.exports = webpackAsyncContext;","import React, { createContext, useReducer } from 'react';\nimport PropTypes from 'prop-types';\n\nconst initialState = {\n  dataLoading: true,\n  selectedLayer: '',\n  form: true,\n  forceUpdate: false,\n  steps: {\n    where: true,\n    symptom: false,\n    age: false,\n    thanks: false\n  },\n  userInfo: {\n    userAddressXY: [],\n    userSymptom: '',\n    userAge: ''\n  }\n};\n\nconst store = createContext(initialState);\nconst { Provider } = store;\n\nconst handleSteps = (state, targetStep) => {\n  let newObj = state;\n\n  for (const tab of Object.keys(state)) {\n    newObj = {\n      ...newObj,\n      ...(tab === targetStep ? { [tab]: true } : { [tab]: false })\n    };\n  }\n\n  return newObj;\n};\n\nconst StateProvider = ({ children }) => {\n  const [state, dispatch] = useReducer((state, action) => {\n    switch (action.type) {\n      case 'set loading':\n        return { ...state, dataLoading: action.payload };\n      case 'switch layer':\n        return { ...state, selectedLayer: action.payload };\n      case 'set step':\n        return { ...state, steps: handleSteps(state.steps, action.payload) };\n      case 'clean steps':\n        return { ...state, form: !state.form };\n      case 'force tiles update':\n        return { ...state, forceUpdate: action.payloade };\n      case 'set info':\n        return { ...state, userInfo: { ...state.userInfo, [action.payload.info]: action.payload.value }};\n      default:\n        return state;\n    }\n  }, initialState);\n\n  return <Provider value={{ state, dispatch }}>{children}</Provider>;\n};\n\nStateProvider.propTypes = {\n  children: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.node), PropTypes.node]).isRequired\n};\n\nexport { store, StateProvider };\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Source } from 'react-mapbox-gl';\n\nconst Sources = ({ config, sourceLoad }) => {\n  const [sourcesLoaded, setLoaded] = React.useState({});\n\n  React.useEffect(() => {\n    if (config) {\n      const values = Object.values(config);\n\n      let newObj = {};\n      for (const info of values) {\n        newObj = { ...newObj, [info.id]: false };\n      }\n\n      setLoaded(newObj);\n    }\n  }, [config]);\n\n  React.useEffect(() => {\n    if (sourcesLoaded) {\n      const all = Object.keys(sourcesLoaded).every(k => sourcesLoaded[k] === true);\n      all && sourceLoad(true);\n    }\n  }, [sourcesLoaded]);\n\n  const manageLayersLoaded = layer => {\n    setLoaded({ ...sourcesLoaded, [layer]: true });\n  };\n\n  return (\n    <>\n      {Object.values(config).map(\n        info =>\n          info.isSource && (\n            <Source\n              key={info.sourceId}\n              id={info.sourceId}\n              tileJsonSource={{\n                type: 'vector',\n                tiles: info.pbf,\n                promoteId: info.promoteId || undefined\n              }}\n              onSourceLoaded={() => manageLayersLoaded(info.id)}\n            />\n          )\n      )}\n    </>\n  );\n};\n\nSources.propTypes = {\n  config: PropTypes.oneOfType([PropTypes.object]).isRequired,\n  sourceLoad: PropTypes.func.isRequired\n};\n\nexport { Sources };\n","const CURSOR = 'pointer';\n\nclass HoverEffect {\n  constructor(definition) {\n    this.map = definition.map;\n    this.id = definition.id;\n    this.sourceId = definition.sourceId;\n    this.sourceLayer = definition.sourceLayer;\n    this.popupFieldsConfig = definition.popupFieldsConfig || {};\n    this._hoveredFeature = 0;\n    this._hoveredId = null;\n    this._popupInfo = {};\n  }\n\n  get popupInfo() {\n    return this._popupInfo;\n  }\n\n  mouseMove(e) {\n    this.map.getCanvas().style.cursor = CURSOR;\n\n    if (e.features.length > 0) {\n      if (this._hoveredId) {\n        this.map.setFeatureState(\n          {\n            source: this.sourceId,\n            id: this._hoveredId,\n            sourceLayer: this.sourceLayer\n          },\n          { hover: false }\n        );\n      }\n\n      this._hoveredId = e.features[0].id;\n\n      this.map.setFeatureState(\n        {\n          source: this.sourceId,\n          id: this._hoveredId,\n          sourceLayer: this.sourceLayer\n        },\n        { hover: true }\n      );\n    }\n\n    const coords = e.lngLat;\n\n    const popupFields = Object.keys(this.popupFieldsConfig);\n    const featureProperties = e.features[0].properties;\n\n    for (const popupField of popupFields) {\n      if (featureProperties.hasOwnProperty(popupField)) {\n        this._popupInfo = {\n          ...this._popupInfo,\n          coords: [coords.lng, coords.lat],\n          shouldRender: true,\n          info: {\n            ...this._popupInfo.info,\n            [popupField]: {\n              ...this.popupFieldsConfig[popupField],\n              value: featureProperties[popupField]\n            }\n          }\n        };\n      }\n    }\n  }\n\n  mouseLeave() {\n    this.map.getCanvas().style.cursor = '';\n\n    this._popupInfo = { shouldRender: false };\n\n    if (this._hoveredId) {\n      this.map.setFeatureState(\n        {\n          source: this.sourceId,\n          id: this._hoveredId,\n          sourceLayer: this.sourceLayer\n        },\n        { hover: false }\n      );\n    }\n\n    this._hoveredId = null;\n  }\n}\n\nexport default HoverEffect;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Map } from 'mapbox-gl';\nimport HoverEffect from '../Classes/MapboxHoverEffect';\n\nfunction useMapEvents(map, layersIds) {\n  const [popupConfig, setPopupConfig] = useState({\n    shouldRender: false\n  });\n\n  const [clickedFeature, setClickedFeature] = useState(null);\n\n  function enableEvents() {\n    const mapObject = map;\n\n    const hoverObjects = [];\n    const values = Object.values(layersIds);\n\n    for (let i = 0; i < values.length; i += 1) {\n      hoverObjects.push(\n        new HoverEffect({\n          map: mapObject,\n          id: values[i].id,\n          sourceId: values[i].sourceId,\n          sourceLayer: values[i].sourceLayer,\n          popupFieldsConfig: values[i].popupFieldsConfig\n        })\n      );\n    }\n\n    for (let i = 0; i < values.length; i += 1) {\n      mapObject.on('mousemove', values[i].id, e => {\n        hoverObjects[i].mouseMove(e);\n\n        const popup = hoverObjects[i].popupInfo;\n        popup && setPopupConfig(popup);\n      });\n\n      mapObject.on('mouseleave', values[i].id, () => {\n        hoverObjects[i].mouseLeave();\n\n        const popup = hoverObjects[i].popupInfo;\n        popup && setPopupConfig(popup);\n      });\n\n      mapObject.on('click', values[i].id, e => {\n        e.features.length !== 0 && setClickedFeature(e.features[0]);\n      });\n\n      mapObject.on('touchstart', values[i].id, e => {\n        e.features.length !== 0 && setClickedFeature(e.features[0]);\n      });\n    }\n  }\n\n  function removeEvents() {\n    const mapObject = map;\n    const launchedIds = Object.values(layersIds);\n\n    for (const id of launchedIds) {\n      mapObject.off('mousemove', id);\n      mapObject.off('mouseleave', id);\n    }\n  }\n\n  React.useEffect(() => {\n    if (map && layersIds) {\n      enableEvents();\n    }\n\n    return () => {\n      removeEvents();\n    };\n  }, [map, layersIds]);\n\n  return [popupConfig, clickedFeature];\n}\n\nuseMapEvents.propTypes = {\n  map: PropTypes.instanceOf(Map).isRequired,\n  layersIds: PropTypes.shape({\n    cadastre_id: PropTypes.object\n  }).isRequired\n};\n\nexport { useMapEvents };\n","import React from 'react';\nimport { store } from '../../store/store';\nimport PropTypes from 'prop-types';\nimport { Map } from 'mapbox-gl';\nimport './style.scss';\n\nconst Loader = ({ mapObject }) => {\n    const globalState = React.useContext(store);\n    const { state: { dataLoading }, dispatch } = globalState;\n\n    React.useEffect(() => {\n        let tilesRenderedChecker = false;\n\n        if (mapObject) {\n            mapObject.once('styledata', () => { // Catch the 'final rendering'\n                const waiting = () => {\n                    if (!mapObject.isStyleLoaded()) {\n                        setTimeout(waiting, 200);\n                    } else {\n                        if (!tilesRenderedChecker) {\n                            dispatch({ type: 'set loading', payload: false });\n                        }\n                        tilesRenderedChecker = true;\n                    }\n                };\n                waiting();\n            });\n        }\n    }, [mapObject]);\n\n    return (\n        <div className={`${dataLoading ? 'loader' : 'loader--close'}`}>\n            <div className=\"CDB-LoaderIcon CDB-LoaderIcon--big\">\n                <svg className=\"CDB-LoaderIcon-spinner\" viewBox=\"0 0 50 50\">\n                    <circle className=\"CDB-LoaderIcon-path\" cx=\"25\" cy=\"25\" r=\"20\" fill=\"none\"></circle>\n                </svg>\n            </div>\n        </div>\n    );\n};\n\nLoader.propTypes = {\n    mapObject: PropTypes.instanceOf(Map).isRequired\n};\n\nexport { Loader };\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport './style.scss';\n\nconst PopupTemplate = ({ content }) => {\n  const [infos, setInfos] = React.useState([]);\n\n  React.useEffect(() => {\n    if (content) {\n      setInfos(Object.values(content));\n    }\n  }, [content]);\n\n  const formatInfo = value =>\n    typeof value === 'number' ? `${new Intl.NumberFormat('es').format(value)}` : value;\n\n  return (\n    <div className=\"popup-template\">\n      {infos &&\n        infos.map((info, index) => (\n          <Fragment key={`dynamic-${index}`}>\n            <span className={`popup-template--static popup-template--static-${index + 1}`}>\n              {info.fieldLabel}\n            </span>\n            <div className={`popup-template--dynamic popup-template--dynamic-${index + 1}`}>\n              <span>{formatInfo(info.value)}</span>\n              <span>{info.label}</span>\n            </div>\n          </Fragment>\n        ))}\n    </div>\n  );\n};\n\nPopupTemplate.propTypes = {\n  content: PropTypes.oneOfType([PropTypes.object]).isRequired\n};\n\nfunction arePropsEqual(prevProps, nextProps) {\n  return prevProps.content === nextProps.content;\n};\n\nconst component = React.memo(PopupTemplate, arePropsEqual);\n\nexport { component as PopupTemplate };\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport './style.scss';\n\nconst positions = {\n    'top-right': { top: '1rem', right: '1rem', bottom: 'auto', left: 'auto' },\n    'top-left': { top: '1rem', left: '1rem', bottom: 'auto', right: 'auto' },\n    'bottom-right': { bottom: '1rem', right: '1rem', top: 'auto', left: 'auto' },\n    'bottom-left': { bottom: '1rem', left: '1rem', top: 'auto', right: 'auto' }\n};\n\nconst POSITIONS = Object.keys(positions);\n\nconst WidgetsContainer = ({ children, position }) => (\n    <div className=\"map-container\" style={{ ...positions[position] }}>\n        {Array.isArray(children) ? children : [children].map((child, i) => (\n            <div key={`widget-${i + 1}`} className=\"map-container__child\">\n                {child}\n            </div>\n        ))}\n    </div>\n);\n\nWidgetsContainer.propTypes = {\n    position: PropTypes.oneOf(POSITIONS),\n    // eslint-disable-next-line\n    children: PropTypes.any.isRequired\n};\n\nWidgetsContainer.defaultProps = {\n    position: POSITIONS[0]\n};\n\nexport { WidgetsContainer };\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Map } from 'mapbox-gl';\nimport { store } from '../../store/store';\nimport '@carto/airship-style';\nimport './style.scss';\n\nconst LayerSelector = ({ mapObject, layers }) => {\n    const globalState = React.useContext(store);\n    const { state: { selectedLayer }, dispatch } = globalState;\n\n    React.useEffect(() => {\n        if (layers) {\n            for (const layer of layers) {\n                if (layer.shouldShowOnInit) {\n                    dispatch({ type: 'switch layer', payload: layer.layersIds[0] });\n                }\n            }\n        }\n    }, []);\n\n    const switchVisibility = id => {\n        dispatch({ type: 'switch layer', payload: id });\n\n        for (const config of layers) {\n            for (const layer of config.layersIds) {\n                if (mapObject.getLayer(layer)) {\n                    layer.includes(id) ?\n                        mapObject.setLayoutProperty(layer, 'visibility', 'visible') :\n                        mapObject.setLayoutProperty(layer, 'visibility', 'none')\n                }\n            }\n        }\n    };\n\n    React.useEffect(() => {\n        if (selectedLayer) {\n            switchVisibility(selectedLayer);\n        }\n    }, [selectedLayer]);\n\n    return (\n          <div className=\"layers-picker\">\n            {selectedLayer && layers.map((layer, index) => (\n                <div key={layer.layersIds[0]} className=\"as-radio\">\n                    <input\n                        className=\"as-radio__input\"\n                        type=\"radio\"\n                        name={layer.layersIds[0]}\n                        id={layer.layersIds[0]}\n                        value={index}\n                        checked={selectedLayer === layer.layersIds[0]}\n                        onChange={e => switchVisibility(e.target.name)}\n                    />\n                    <label className=\"as-caption\" htmlFor={layer.layersIds[0]}>{layer.layerTitle}</label>\n                </div>\n            ))}\n          </div>\n    );\n};\n  \nLayerSelector.propTypes = {\n    mapObject: PropTypes.instanceOf(Map).isRequired,\n    layers: PropTypes.arrayOf(\n        PropTypes.shape({\n          shouldShowOnInit: PropTypes.bool,\n          layersIds: PropTypes.arrayOf(PropTypes.string),\n          layerTitle: PropTypes.string\n        })\n      ).isRequired\n};\n\nexport { LayerSelector };\n","import React from 'react';\nimport { store } from '../../store/store';\nimport PropTypes from 'prop-types';\nimport mapboxgl, { Map } from 'mapbox-gl';\nimport MapboxGeocoder from '@mapbox/mapbox-gl-geocoder';\nimport '@mapbox/mapbox-gl-geocoder/dist/mapbox-gl-geocoder.css';\nimport './style.scss';\n\nconst Geocoder = ({ mapObject }) => {\n    const globalState = React.useContext(store);\n    const { dispatch } = globalState;\n\n    const geocoderContainerRef = React.useRef(null);\n    const [center, setCenter] = React.useState([]);\n\n    const [geocoderObject, setGeocoderObject] = React.useState(null);\n    React.useEffect(() => {\n        if (center.length !== 0) {\n            dispatch({ type: 'set step', payload: 'symptom' });\n            dispatch({ type: 'set info', payload: { info: 'userAddressXY', value: center }});\n        }\n    }, [center]);\n\n    React.useEffect(() => {\n        setGeocoderObject(new MapboxGeocoder({\n            accessToken: 'pk.eyJ1IjoiZG90Z2lzIiwiYSI6ImNrNnVxcmd3cjAxd2YzbnF1MTg3a2k4MTMifQ.iGvDEmTNK_94AabfNKfytA',\n            mapboxgl: mapboxgl,\n            flyTo: false,\n            marker: { color: '#1785fb' },\n            placeholder: 'Buscar dirección...',\n            countries: 'es'\n        }));\n    }, [geocoderContainerRef]);\n\n    React.useEffect(() => {\n        if (geocoderObject) {\n            geocoderContainerRef.current.appendChild(geocoderObject.onAdd(mapObject));\n\n            geocoderObject.on('result', e => {\n                const center = e && e.result && e.result.center;\n                center && setCenter(center);\n            });\n\n            geocoderObject.on('error', () => {\n                setCenter([]);\n                geocoderObject.clear();\n            });\n\n            geocoderObject.on('clear', () => {\n                setCenter([]);\n            });\n\n            if (geocoderContainerRef && geocoderContainerRef.current) {\n                geocoderObject.clear(); // Trigger 'focus'\n            }\n        }\n    }, [geocoderObject]);\n\n    return <div ref={geocoderContainerRef} className=\"calculator-geocoder\"></div>;\n};\n\nGeocoder.propTypes = {\n    mapObject: PropTypes.instanceOf(Map).isRequired\n};\n\nexport { Geocoder };\n","const DOTGIS_CARTO_USER = 'dotgis';\nconst DOTGIS_API_KEY = 'nSD6SXZdlIi-u0lsX0Vxfg';\n\nconst CARTO_ENDPOINT = query => `https://${DOTGIS_CARTO_USER}.carto.com/api/v2/sql?q=${query}&api_key=${DOTGIS_API_KEY}`;\n\nconst CHECK_DATA_QUERY = (type, coords) => `\n  WITH sub as (\n    SELECT grid.cartodb_id AS id,\n           grid.type_${type},\n           CASE\n             WHEN ST_INTERSECTS(grid.the_geom, ST_SetSRID(ST_Point(${coords.lat}, ${coords.long}), 4326)) THEN true\n           ELSE false\n           END AS hasData\n    FROM grid_pob1001 grid\n  ) SELECT * FROM sub WHERE hasData IS true`;\n\nconst UPDATE_DATA_QUERY = (id, type, value) => `UPDATE grid_pob1001 SET type_${type} = ${value} WHERE cartodb_id = ${id}`;\n\nexport { CARTO_ENDPOINT, CHECK_DATA_QUERY, UPDATE_DATA_QUERY };\n","const fetchData = async endpoint => {\n    const promise = await fetch(endpoint);\n\n    return promise;\n};\n\nexport default fetchData;\n","import React from 'react';\nimport { store } from '../../store/store';\nimport PropTypes from 'prop-types';\nimport { Map } from 'mapbox-gl';\nimport { Geocoder } from '../Geocoder';\nimport { defineCustomElements } from '@carto/airship-components/dist/loader';\nimport { CARTO_ENDPOINT, CHECK_DATA_QUERY, UPDATE_DATA_QUERY } from '../../utils/config';\nimport fetchData from '../../utils/requests';\nimport zoneSvg from './img/zone.svg';\nimport symptomSvg from './img/symptom.svg';\nimport ageSvg from './img/age.svg';\nimport './style.scss';\n\ndefineCustomElements(window);\n\nconst Form = ({ mapObject }) => {\n    const globalState = React.useContext(store);\n    const { state, dispatch } = globalState;\n\n    const symptomDropdownRef = React.useRef();\n    const ageDropdownRef = React.useRef();\n    const seeMapButtonRef = React.useRef();\n\n    React.useEffect(() => {\n        if(symptomDropdownRef && symptomDropdownRef.current) {\n            symptomDropdownRef.current.options = [\n                { text: 'No tuve síntomas', value: 0 },\n                { text: 'Tuve síntomas, pero me hicieron el test', value: 1 },\n                { text: 'Fuí positivo', value: 2 },\n                { text: 'Soy positivo', value: 3 }\n            ];\n\n            symptomDropdownRef.current.addEventListener('optionChanged', event => {\n                const value = event && event.detail;\n\n                if(value) {\n                    dispatch({ type: 'set step', payload: 'age' });\n                    dispatch({ type: 'set info', payload: { info: 'userSymptom', value: value }});\n                    dispatch({ type: 'switch layer', payload: `${value}_id` });\n                }\n            });\n\n            symptomDropdownRef.current.style.setProperty('--as-dropdown--color--main', 'var(--color--primary)');\n            symptomDropdownRef.current.style.setProperty('--as-dropdown--background-color', 'var(--color--secondary)');\n            symptomDropdownRef.current.style.setProperty('--as-dropdown__list--border-color', 'var(--color--primary)');\n            symptomDropdownRef.current.style.setProperty('--as-dropdown--color--hover', 'var(--color--secondary--hover)');\n            symptomDropdownRef.current.style.setProperty('--as-dropdown--color', '#fff');\n        }\n    }, [symptomDropdownRef]);\n\n    React.useEffect(() => {\n        if(ageDropdownRef && ageDropdownRef.current) {\n            ageDropdownRef.current.options = [\n                { text: '<18 años', value: 1 },\n                { text: '18-40 años', value: 2 },\n                { text: '40-60 años', value: 3 },\n                { text: '>60 años', value: 4 }\n            ];\n\n            ageDropdownRef.current.addEventListener('optionChanged', event => {\n                const value = event && event.detail;\n\n                if(value) {\n                    dispatch({ type: 'set step', payload: 'thanks' });\n                    dispatch({ type: 'set info', payload: { info: 'userAge', value: value }});\n                }\n            });\n            \n            ageDropdownRef.current.style.setProperty('--as-dropdown--color--main', 'var(--color--primary)');\n            ageDropdownRef.current.style.setProperty('--as-dropdown--background-color', 'var(--color--secondary)');\n            ageDropdownRef.current.style.setProperty('--as-dropdown__list--border-color', 'var(--color--primary)');\n            ageDropdownRef.current.style.setProperty('--as-dropdown--color--hover', 'var(--color--secondary--hover)');\n            ageDropdownRef.current.style.setProperty('--as-dropdown--color', '#fff');\n        }\n    }, [ageDropdownRef]);\n\n    React.useEffect(() => {\n        if(seeMapButtonRef && seeMapButtonRef.current) {\n            seeMapButtonRef.current.style.setProperty('--as--btn--ui-color--primary', 'var(--color--secondary)');\n            seeMapButtonRef.current.style.setProperty('--as--btn--ui-color--primary--hover', 'var(--color--secondary--hover)');\n        }\n    }, [seeMapButtonRef]);\n\n    const checkHasData = () => {\n        dispatch({ type: 'set loading', payload: true });\n\n        const { userAddressXY, userSymptom } = state.userInfo;\n\n        fetchData(CARTO_ENDPOINT(CHECK_DATA_QUERY(userSymptom, { lat: userAddressXY[0], long: userAddressXY[1] })))\n          .then(response => response.json())\n          .then(json => {\n              if (json && json.rows) {\n                if (Array.isArray(json.rows) && json.rows.length !== 0) {\n                    const gridId = json.rows[0].id;\n                    const totalType = json.rows[0][`type_${userSymptom}`];\n\n                    fetchData(CARTO_ENDPOINT(UPDATE_DATA_QUERY(gridId, userSymptom, totalType === null ? 1 : totalType + 1)))\n                        .then(response => {\n                            if(response.ok) {\n                                dispatch({ type: 'clean steps', payload: 'clean' });\n                                dispatch({ type: 'set loading', payload: false });\n\n                                mapObject.flyTo({\n                                    center: userAddressXY,\n                                    zoom: 15,\n                                    essential: true // this animation is considered essential with respect to prefers-reduced-motion\n                                })\n                                .once('moveend', () => {\n                                    dispatch({ type: 'force tiles update', payload: true });\n                                    dispatch({ type: 'force tiles update', payload: false });\n                                });\n                            }\n                        })\n                        .catch(err => {\n                            dispatch({ type: 'set loading', payload: false });\n                            alert('¡Ups! Parece que tu zona no se encuentra disponible para realizar el conteo. Pero puedes echarle un vistazo al mapa.');\n                        });\n                } else {\n                    dispatch({ type: 'clean steps', payload: 'clean' });\n                    alert('¡Ups! Parece que tu zona no se encuentra disponible para realizar el conteo. Pero puedes echarle un vistazo al mapa.');\n                }\n              }\n          })\n          .catch(err => {\n            dispatch({ type: 'set loading', payload: false });\n            alert('¡Ups! Parece que tu zona no se encuentra disponible para realizar el conteo. Pero puedes echarle un vistazo al mapa.');\n          });\n    };\n\n    return (\n        <>\n          <div className={`form__bg ${state.form ? 'form__bg--opened' : ''}`}></div>\n            <div className={`form ${state.form ? 'form--opened' : '' }`}>\n                <div className=\"form__images\">\n                    <img alt=\"zone-svg\" src={zoneSvg} />\n                    <img alt=\"symptom-svg\" src={symptomSvg} style={{ opacity: state.steps.symptom || state.steps.age || state.steps.thanks ? 1 : 0.3 }} />\n                    <img alt=\"age-svg\" src={ageSvg} style={{ opacity: state.steps.age || state.steps.thanks ? 1 : 0.3 }} />\n                </div>\n                <div className=\"form__step where\" style={{ display: state.steps.where ? 'block' : 'none' }}>\n                    <h4>¿Dónde estás?</h4>\n                    <Geocoder mapObject={mapObject} />\n                </div>\n                <div className=\"form__step symptom\" style={{ display: state.steps.symptom ? 'block' : 'none' }}>\n                    <h4>¿Tienes síntomas?</h4>\n                    <as-dropdown\n                        ref={symptomDropdownRef}\n                        default-text=\"Síntomas\"\n                        can-clear=\"true\">\n                    </as-dropdown>\n                </div>\n                <div className=\"form__step age\" style={{ display: state.steps.age ? 'block' : 'none' }}>\n                    <h4>Y por último... ¿Tú edad?</h4>\n                    <as-dropdown\n                        ref={ageDropdownRef}\n                        default-text=\"Edad\"\n                        can-clear=\"true\">\n                    </as-dropdown>\n                </div>\n                <div className=\"form__step thanks\" style={{ display: state.steps.thanks ? 'block' : 'none' }}>\n                    <h4>¡Gracias!</h4>\n                    <button ref={seeMapButtonRef} className=\"as-btn as-btn--primary\" onClick={checkHasData}>Ver mapa</button>\n                </div>\n            </div>\n        </>\n    );\n} \n\nGeocoder.propTypes = {\n    mapObject: PropTypes.instanceOf(Map).isRequired\n};\n\nexport { Form };\n","import React from 'react';\nimport './style.scss';\n\nconst DOTGIS_WEBSITE = 'https://www.dotgiscorp.com/';\n\nconst Footer = () => (\n    <footer className=\"footer\" onClick={() => window.open(DOTGIS_WEBSITE)}>\n        <span>Crafted by dotGIS</span>\n    </footer>\n);\n\nexport { Footer };\n","export default {\n    dotgisUser: 'dotgis',\n    dotgisMapsKey: 'wqTxcWJUw09P4IzpBo4kfg',\n  \n    pharmacyVoronoiId: 'pharmacy_voronoi',\n    pharmacyVoronoiSourceId: 'pharmacy_voronoi_source_id',\n    pharmacyVoronoiSourceLayer: 'pharmacy_voronoi_source_layer',\n\n    pharmacyId: 'pharmacy',\n    pharmacySourceId: 'pharmacy_source_id',\n    pharmacySourceLayer: 'pharmacy_source_layer',\n    aggregatedField: 'pharmacy_aggregated',\n\n    supermarketsVoronoiId: 'supermarkets_voronoi',\n    supermarketsVoronoiSourceId: 'supermarkets_voronoi_source_id',\n    supermarketsVoronoiSourceLayer: 'supermarkets_voronoi_source_layer',\n\n    supermarketsId: 'supermarkets',\n    supermarketsSourceId: 'supermarkets_source_id',\n    supermarketsSourceLayer: 'supermarkets_source_layer',\n    aggregatedSupermarketsField: 'supermarkets_aggregated',\n\n    infectedId: '3_id',\n    infectedIdWas: '2_id',\n    infectedIdTest: '1_id',\n    infectedIdNo: '0_id',\n    infectedSourceId: 'infected_source_id',\n    infectedSourceLayer: 'infected_source_layer',\n  };\n  ","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Map } from 'mapbox-gl';\nimport { Layer, Popup } from 'react-mapbox-gl';\nimport { useMapEvents } from '../Hooks/useMapEvents';\nimport { PopupTemplate } from '../../components';\nimport CONFIG from '../Config/config';\n\nconst Layers = ({ map, config }) => {\n  const [popupConfig, clickedFeature] = useMapEvents(map, config);\n\n  React.useEffect(() => {\n    if (clickedFeature && (clickedFeature.source === CONFIG.pharmacySourceId || clickedFeature.source === CONFIG.supermarketsSourceId)) {\n      const centerIn = clickedFeature.geometry.coordinates;\n\n      map.flyTo({\n        center: centerIn,\n        zoom: Math.round(map.getZoom() + 2),\n        essential: true\n      });\n    }\n  }, [clickedFeature]);\n\n\n  return (\n    <>\n      {Object.values(config).map(info => (\n        !info.isSource && <Layer\n          key={info.id}\n          id={info.id}\n          type={info.type}\n          sourceId={info.sourceId}\n          sourceLayer={info.sourceLayer}\n          paint={info.paint}\n          {...(info.layout && { layout: info.layout })}\n          {...(info.minZoom && { minZoom: info.minZoom })}\n          {...(info.maxZoom && { maxZoom: info.maxZoom })}\n        />\n      ))}\n      {popupConfig && popupConfig.coords && (\n        <Popup\n          coordinates={popupConfig.coords}\n          style={{ display: popupConfig.shouldRender ? '' : 'none' }}\n          offset={{\n            bottom: [-60, 80]\n          }}\n        >\n          <PopupTemplate content={popupConfig.info} />\n        </Popup>\n      )}\n    </>\n  );\n};\n\nLayers.propTypes = {\n  map: PropTypes.instanceOf(Map).isRequired,\n  config: PropTypes.oneOfType([PropTypes.object]).isRequired\n};\n\nexport { Layers };\n","class CartoMVTRequest {\n    constructor(definition) {\n      this.cartoAccount = definition.cartoAccount;\n      this.cartoMapsKey = definition.cartoMapsKey;\n      this.id = definition.id;\n      this.sql = definition.sql;\n      this.getGeoJSON = definition.getGeoJSON;\n      this.aggregationConfig = definition.aggregationConfig;\n    }\n  \n    async getTiles() {\n      const mapConfig = {\n        buffersize: { mvt: 1 },\n        layers: [\n          {\n            id: this.id,\n            type: 'mapnik',\n            options: {\n              sql: this.sql,\n              aggregation: this.aggregationConfig || undefined,\n              id: 'cartodb_id'\n            }\n          }\n        ]\n      };\n  \n      const response = await fetch(\n        `https://${this.cartoAccount}.carto.com/api/v1/map${\n          this.cartoMapsKey ? `?api_key=${this.cartoMapsKey}` : ''\n        }`,\n        {\n          method: 'POST',\n          headers: { 'Content-Type': 'application/json' },\n          body: JSON.stringify(mapConfig)\n        }\n      );\n  \n      const layergroup = await response.json();\n  \n      return layergroup.metadata.tilejson.vector.tiles;\n    }\n  \n    get requestInfo() {\n      return {\n        carto_account: this.cartoAccount,\n        carto_maps_key: this.cartoMapsKey,\n        request_id: this.id,\n        sql_query: this.sql,\n        aggregation_config: this.aggregationConfig || undefined\n      };\n    }\n  \n    set updateSql(query) {\n      this.sql = query;\n    }\n  }\n  \n  export default CartoMVTRequest;\n  ","export default {\n    voronoi: 'SELECT * FROM voronoi_farmacias',\n    pharmacy: 'SELECT * FROM farmacias',\n    supermarketVoronoi: 'SELECT * FROM voronoi_supermkt_madrid',\n    supermarket: 'SELECT * FROM supermercados_madrid',\n    infected: 'SELECT * FROM grid_pob1001'\n};\n","export default {\n    voronoi: {\n        'fill-color': ['case', ['boolean', ['feature-state', 'hover'], false], 'rgba(204, 102, 255, 0.15)', 'rgba(204, 102, 255, 0.1)'],\n        'fill-outline-color': 'rgba(204, 102, 255, 0.3)',\n    },\n    cluster: aggregatedField => ({\n        'circle-color': ['step', ['get', aggregatedField], 'rgba(0, 0, 0, 0)', 100, '#b4d9cc', 750, '#63a6a0', 2000, '#287274'],\n        'circle-radius': [\n            'case',\n            ['>', ['get', aggregatedField], 1],\n            ['step', ['get', aggregatedField], 20, 100, 30, 750, 40],\n            6\n        ],\n    }),\n    pharmacy: {\n        'circle-color': ['case', ['boolean', ['feature-state', 'hover'], false], 'rgb(255, 102, 0)', 'rgb(0, 255, 0)'],\n        'circle-radius': ['interpolate', ['exponential', 0.7], ['zoom'], 4, 0, 10, 3, 15, 5, 20, 7]\n    },\n    supermarket: {\n        'circle-color': ['case', ['boolean', ['feature-state', 'hover'], false], 'rgb(255, 102, 0)', 'rgb(0, 102, 255)'],\n        'circle-radius': ['interpolate', ['exponential', 0.7], ['zoom'], 4, 0, 10, 3, 15, 5, 20, 7]\n    },\n    label_paint: labelField => ({\n        textColor: {\n            'text-color': ['case', ['>', ['get', labelField], 100], '#333', 'rgba(0, 0, 0, 0)']\n        },\n        layout: {\n            'text-field': `{${labelField}}`,\n            'text-font': ['DIN Offc Pro Medium', 'Arial Unicode MS Bold'],\n            'text-size': ['step', ['get', labelField], 12, 100, 13, 750, 14],\n            'text-allow-overlap': true\n        }\n    }),\n    infected: type => ({\n        'fill-color': [\n            'interpolate',\n            ['linear'],\n            ['to-number', ['get', `type_${type}`]],\n            0,\n            'rgba(0, 0, 0, 0)',\n            1,\n            'rgba(255, 237, 160, 0.6)',\n            2,\n            'rgba(254, 217, 118, 0.6)',\n            3,\n            'rgba(254, 178, 76, 0.6)',\n            4,\n            'rgba(253, 141, 60, 0.6)',\n            5,\n            'rgba(252, 78, 42, 0.6)',\n            6,\n            'rgba(227, 26, 28, 0.6)',\n            Number.MAX_SAFE_INTEGER,\n            'rgba(189, 0, 38, 0.6)'\n        ],\n        'fill-outline-color': 'rgba(204, 102, 255, 0.3)'\n    })\n};\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport CartoMVTRequest from '../Classes/CartoMVTRequest';\nimport QUERY from '../Config/queries';\nimport CONFIG from '../Config/config';\nimport PAINT from '../Config/paints';\n\nfunction useCartoTiles() {\n  const [layersConfig, setLayers] = useState(null);\n\n  const getTiles = async () => {\n    const voronoiInfo = new CartoMVTRequest({\n      cartoAccount: CONFIG.dotgisUser,\n      cartoMapsKey: CONFIG.dotgisMapsKey,\n      id: CONFIG.pharmacyVoronoiSourceLayer,\n      sql: QUERY.voronoi\n    });\n\n    const pharmacyClusterInfo = new CartoMVTRequest({\n      cartoAccount: CONFIG.dotgisUser,\n      cartoMapsKey: CONFIG.dotgisMapsKey,\n      id: CONFIG.pharmacySourceLayer,\n      sql: QUERY.pharmacy,\n      aggregationConfig: {\n        threshold: 1,\n        placement: 'centroid',\n        columns: {\n          [CONFIG.aggregatedField]: {\n            aggregate_function: 'count',\n            aggregated_column: 'rid'\n          }\n        },\n        filters: {\n          [CONFIG.aggregatedField]: { greater_than: 1 }\n        },\n        resolution: 64\n      }\n    });\n\n    const pharmacyInfo = new CartoMVTRequest({\n      cartoAccount: CONFIG.dotgisUser,\n      cartoMapsKey: CONFIG.dotgisMapsKey,\n      id: `${CONFIG.pharmacySourceLayer}_raw`,\n      sql: QUERY.pharmacy\n    });\n\n    const supermarketInfo = new CartoMVTRequest({\n      cartoAccount: CONFIG.dotgisUser,\n      cartoMapsKey: CONFIG.dotgisMapsKey,\n      id: `${CONFIG.supermarketsSourceLayer}_raw`,\n      sql: QUERY.supermarket\n    });\n\n    const supermarketClusterInfo = new CartoMVTRequest({\n      cartoAccount: CONFIG.dotgisUser,\n      cartoMapsKey: CONFIG.dotgisMapsKey,\n      id: CONFIG.supermarketsSourceLayer,\n      sql: QUERY.supermarket,\n      aggregationConfig: {\n        threshold: 1,\n        placement: 'centroid',\n        columns: {\n          [CONFIG.aggregatedSupermarketsField]: {\n            aggregate_function: 'count',\n            aggregated_column: 'id_super'\n          }\n        },\n        filters: {\n          [CONFIG.aggregatedSupermarketsField]: { greater_than: 1 }\n        },\n        resolution: 64\n      }\n    });\n\n    const supermarketsVoronoiInfo = new CartoMVTRequest({\n      cartoAccount: CONFIG.dotgisUser,\n      cartoMapsKey: CONFIG.dotgisMapsKey,\n      id: CONFIG.supermarketsVoronoiSourceLayer,\n      sql: QUERY.supermarketVoronoi\n    });\n\n    const infectedInfo = new CartoMVTRequest({\n      cartoAccount: CONFIG.dotgisUser,\n      cartoMapsKey: '6fb966f30adb903ece7385e3aa059752a4e8fb5d',\n      id: CONFIG.infectedSourceLayer,\n      sql: QUERY.infected\n    });\n\n    Promise.all([\n      voronoiInfo.getTiles(),\n      pharmacyClusterInfo.getTiles(),\n      pharmacyInfo.getTiles(),\n      supermarketInfo.getTiles(),\n      supermarketClusterInfo.getTiles(),\n      supermarketsVoronoiInfo.getTiles(),\n      infectedInfo.getTiles()\n    ]).then(response => {\n      setLayers({\n        pharmacy_voronoi_source: {\n          isSource: true,\n          sourceId: CONFIG.pharmacyVoronoiSourceId,\n          pbf: response[0],\n          promoteId: 'cartodb_id'\n        },\n        pharmacy_voronoi_layer: {\n          id: CONFIG.pharmacyVoronoiId,\n          sourceId: CONFIG.pharmacyVoronoiSourceId,\n          sourceLayer: CONFIG.pharmacyVoronoiSourceLayer,\n          type: 'fill',\n          paint: PAINT.voronoi,\n          layout: {\n            'visibility': 'none'\n          }\n        },\n        pharmacy_raw_source: {\n          isSource: true,\n          sourceId: `${CONFIG.pharmacySourceId}_raw`,\n          pbf: response[2],\n          promoteId: 'cartodb_id'\n        },\n        pharmacy_raw_layer: {\n          id: `${CONFIG.pharmacyId}_raw`,\n          sourceId: `${CONFIG.pharmacySourceId}_raw`,\n          sourceLayer: `${CONFIG.pharmacySourceLayer}_raw`,\n          type: 'circle',\n          paint: PAINT.pharmacy,\n          popupFieldsConfig: {\n            nombre: {\n              fieldLabel: 'Nombre',\n              label: ''\n            },\n            direccion: {\n              fieldLabel: 'Dirección',\n              label: ''\n            },\n          },\n          layout: {\n            'visibility': 'none'\n          }\n        },\n        pharmacy_cluster_source: {\n          isSource: true,\n          sourceId: CONFIG.pharmacySourceId,\n          pbf: response[1],\n          promoteId: 'cartodb_id'\n        },\n        pharmacy_cluster_layer: {\n          id: CONFIG.pharmacyId,\n          sourceId: CONFIG.pharmacySourceId,\n          sourceLayer: CONFIG.pharmacySourceLayer,\n          type: 'circle',\n          paint: PAINT.cluster(CONFIG.aggregatedField),\n          layout: {\n            'visibility': 'none'\n          }\n        },\n        pharmacy_cluster_labels_layer: {\n          id: `${CONFIG.pharmacyId}_labels`,\n          sourceId: CONFIG.pharmacySourceId,\n          sourceLayer: CONFIG.pharmacySourceLayer,\n          type: 'symbol',\n          paint: PAINT.label_paint(CONFIG.aggregatedField).textColor,\n          layout: { 'visibility': 'none', ...PAINT.label_paint(CONFIG.aggregatedField).layout }\n        },\n        supermarkets_voronoi_source: {\n          isSource: true,\n          sourceId: CONFIG.supermarketsVoronoiSourceId,\n          pbf: response[5],\n          promoteId: 'cartodb_id'\n        },\n        supermarkets_voronoi_layer: {\n          id: CONFIG.supermarketsVoronoiId,\n          sourceId: CONFIG.supermarketsVoronoiSourceId,\n          sourceLayer: CONFIG.supermarketsVoronoiSourceLayer,\n          type: 'fill',\n          paint: PAINT.voronoi,\n          layout: {\n            'visibility': 'none'\n          }\n        },\n        supermarkets_raw_source: {\n          isSource: true,\n          sourceId: `${CONFIG.supermarketsSourceId}_raw`,\n          pbf: response[3],\n          promoteId: 'cartodb_id'\n        },\n        supermarkets_raw_layer: {\n          id: `${CONFIG.supermarketsId}_raw`,\n          sourceId: `${CONFIG.supermarketsSourceId}_raw`,\n          sourceLayer: `${CONFIG.supermarketsSourceLayer}_raw`,\n          type: 'circle',\n          paint: PAINT.supermarket,\n          popupFieldsConfig: {\n            nombre: {\n              fieldLabel: 'Nombre',\n              label: ''\n            },\n            direccion: {\n              fieldLabel: 'Dirección',\n              label: ''\n            },\n          },\n          layout: {\n            'visibility': 'none'\n          }\n        },\n        supermarkets_cluster_source: {\n          isSource: true,\n          sourceId: CONFIG.supermarketsSourceId,\n          pbf: response[4],\n          promoteId: 'cartodb_id'\n        },\n        supermarkets_cluster_layer: {\n          id: CONFIG.supermarketsId,\n          sourceId: CONFIG.supermarketsSourceId,\n          sourceLayer: CONFIG.supermarketsSourceLayer,\n          type: 'circle',\n          paint: PAINT.cluster(CONFIG.aggregatedSupermarketsField),\n          layout: {\n            'visibility': 'none'\n          }\n        },\n        supermarket_cluster_labels_layer: {\n          id: `${CONFIG.supermarketsId}_labels`,\n          sourceId: CONFIG.supermarketsSourceId,\n          sourceLayer: CONFIG.supermarketsSourceLayer,\n          pbf: response[4],\n          promoteId: 'cartodb_id',\n          type: 'symbol',\n          paint: PAINT.label_paint(CONFIG.aggregatedSupermarketsField).textColor,\n          layout: { 'visibility': 'none', ...PAINT.label_paint(CONFIG.aggregatedSupermarketsField).layout }\n        },\n        infected_source: {\n          isSource: true,\n          sourceId: CONFIG.infectedSourceId,\n          pbf: response[6],\n          promoteId: 'cartodb_id'\n        },\n        infected_layer: {\n          id: CONFIG.infectedId,\n          sourceId: CONFIG.infectedSourceId,\n          sourceLayer: CONFIG.infectedSourceLayer,\n          type: 'fill',\n          paint: PAINT.infected(3),\n          popupFieldsConfig: {\n            type_3: {\n              fieldLabel: 'infectados',\n              label: ''\n            }\n          },\n          layout: {\n            'visibility': 'visible'\n          }\n        },\n        infected_layer_was: {\n          id: CONFIG.infectedIdWas,\n          sourceId: CONFIG.infectedSourceId,\n          sourceLayer: CONFIG.infectedSourceLayer,\n          type: 'fill',\n          paint: PAINT.infected(2),\n          popupFieldsConfig: {\n            type_2: {\n              fieldLabel: 'fueron positivos',\n              label: ''\n            }\n          },\n          layout: {\n            'visibility': 'none'\n          }\n        },\n        infected_layer_test: {\n          id: CONFIG.infectedIdTest,\n          sourceId: CONFIG.infectedSourceId,\n          sourceLayer: CONFIG.infectedSourceLayer,\n          type: 'fill',\n          paint: PAINT.infected(1),\n          popupFieldsConfig: {\n            type_1: {\n              fieldLabel: 'hubo síntomas, sin prueba de test',\n              label: ''\n            }\n          },\n          layout: {\n            'visibility': 'none'\n          }\n        },\n        infected_layer_no: {\n          id: CONFIG.infectedIdNo,\n          sourceId: CONFIG.infectedSourceId,\n          sourceLayer: CONFIG.infectedSourceLayer,\n          type: 'fill',\n          paint: PAINT.infected(0),\n          popupFieldsConfig: {\n            type_0: {\n              fieldLabel: 'sin síntomas',\n              label: ''\n            }\n          },\n          layout: {\n            'visibility': 'none'\n          }\n        }\n      });\n    });\n  };\n\n  React.useEffect(() => {\n    getTiles();\n  }, []);\n\n  /* React.useEffect(() => {\n    if (forceUpdate) {\n      const layersToRemove = [CONFIG.infectedId, CONFIG.infectedIdWas, CONFIG.infectedIdTest, CONFIG.infectedIdNo];\n\n      for(const layer of layersToRemove) {\n        mapObject.removeLayer(layer);\n      }\n\n      mapObject.removeSource(CONFIG.infectedSourceId);\n      \n      getTiles();\n    }\n  }, [forceUpdate]); */\n\n  return [layersConfig];\n}\n\nuseCartoTiles.propTypes = {\n  mapFilters: PropTypes.oneOfType([PropTypes.object]).isRequired\n};\n\nexport { useCartoTiles };\n","import React from 'react';\nimport { store } from '../store/store';\nimport mapboxgl from 'mapbox-gl';\nimport ReactMapboxGL, { MapContext, ZoomControl } from 'react-mapbox-gl';\nimport { Sources, Layers, useCartoTiles } from '../layers';\nimport { Loader, WidgetsContainer, LayerSelector, Form, Footer } from '../components';\nimport CONFIG from '../layers/Config/config';\n\nconst Map = ReactMapboxGL({\n  accessToken: 'pk.eyJ1IjoiZG90Z2lzIiwiYSI6ImNqd3Z6amtjMTBjOTA0OW84ZjVvYzF6bjQifQ.LIbUaYq3GaiWTzsBV6YnTA',\n  dragRotate: false,\n  minZoom: 12\n});\n\nconst style = 'https://basemaps.cartocdn.com/gl/dark-matter-gl-style/style.json';\n\nconst checkBrowserSupport = () => {\n  if (!mapboxgl.supported()) {\n    // eslint-disable-next-line\n    alert('Tu navegador no soporta Mapbox GL JS.');\n    return false;\n  }\n  return true;\n};\n\nconst layersVisibilityConfig = [\n  { shouldShowOnInit: true, layersIds: [CONFIG.infectedId], layerTitle: 'Positivos' },\n  { shouldShowOnInit: false, layersIds: [CONFIG.infectedIdWas], layerTitle: 'Fueron positivos' },\n  { shouldShowOnInit: false, layersIds: [CONFIG.infectedIdTest], layerTitle: 'Hubo síntomas, sin prueba de test' },\n  { shouldShowOnInit: false, layersIds: [CONFIG.infectedIdNo], layerTitle: 'Sin síntomas' },\n  { shouldShowOnInit: false, layersIds: [CONFIG.pharmacyId, CONFIG.pharmacyVoronoiId, `${CONFIG.pharmacyId}_raw`, `${CONFIG.pharmacyId}_labels`], layerTitle: 'Farmacias' },\n  { shouldShowOnInit: false, layersIds: [CONFIG.supermarketsId, CONFIG.supermarketsVoronoiId, `${CONFIG.supermarketsId}_raw`, `${CONFIG.supermarketsId}_labels`], layerTitle: 'Supermercados' }\n];\n\nconst MapboxMap = () => {\n  // const globalState = React.useContext(store);\n  // const { state: { forceUpdate } } = globalState;\n\n  const [mapObject, setMap] = React.useState();\n  const [allLoaded, setAllLoaded] = React.useState(false);\n  const [layersConfig] = useCartoTiles();\n\n  return (\n    <>\n      {checkBrowserSupport() && (\n        <>\n          { \n            mapObject && (\n              <>\n                <Loader mapObject={mapObject} />\n                <Form mapObject={mapObject} />\n                <WidgetsContainer>\n                  <LayerSelector key=\"layer-picker\" mapObject={mapObject} layers={layersVisibilityConfig} />\n                </WidgetsContainer>\n              </>\n            )\n          }\n          <Map\n            style={style}\n            center={[-3.703790, 40.416775]}\n            zoom={[15]}\n            containerStyle={{\n              position: 'absolute',\n              width: '100%',\n              height: '100%'\n            }}\n          >\n            <MapContext.Consumer>\n              {map => {\n                !mapObject && setMap(map);\n\n                return (\n                  <>\n                    {layersConfig && (\n                      <>\n                        <Sources\n                          key=\"sources\"\n                          config={layersConfig}\n                          sourceLoad={response => setAllLoaded(response)}\n                        />\n                        {allLoaded && (\n                          <>\n                            <Layers key=\"map\" map={map} config={layersConfig} />\n                          </>\n                        )}\n                        <ZoomControl\n                          key=\"zoom-control\"\n                          position=\"bottom-left\"\n                          className=\"custom__zoom\"\n                        />\n                      </>\n                    )}\n                  </>\n                );\n              }}\n            </MapContext.Consumer>\n          </Map>\n          <Footer />\n        </>\n      )}\n    </>\n  );\n};\n\nexport default MapboxMap;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { StateProvider } from './store/store.js';\nimport App from './map';\nimport './index.scss';\n\nconst app = (\n    <StateProvider>\n      <App />\n    </StateProvider>\n);\n\nReactDOM.render(app, document.getElementById('root'));\n"],"sourceRoot":""}